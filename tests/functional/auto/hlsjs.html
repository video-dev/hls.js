<html>
   <head>
<script src="/dist/hls.js"></script>
   </head>
   <body>
<video id="video"></video>
<script>

var video,hls;


function setup(callback) {
  if(Hls.isSupported()) {
    if(hls) {
     hls.destroy();
    }
    video = document.getElementById('video');
    try {
      hls = new Hls();
      hls.loadSource('http://www.streambox.fr/playlists/test_001/stream.m3u8');
      hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED,function() {
        video.play();
      });
      hls.on(Hls.Events.ERROR,function(event,data) {
        if (data.fatal) {
          callback(data.details);
        }
      }.bind(this));
      video.onerror = function(event) {
        callback('video_error_' + video.error.code);
      }.bind(this);
    } catch(err) {
      callback('exception');
    }
  } else {
    callback('notSupported');
  }
}

function testLoadedData(callback) {
  setup(callback);
  video.onloadeddata = function() {
    callback('loadeddata');
  }.bind(this);
}

function testEnded(callback) {
  setup(callback);
  video.onloadeddata = function() {
    video.currentTime = video.duration - 5;
  }.bind(this);

  video.onended = function() {
    callback('ended');
  }.bind(this);

}



</script>
   </body>
 </html>

