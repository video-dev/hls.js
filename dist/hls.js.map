{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "node_modules/browserify/node_modules/events/events.js",
    "node_modules/webworkify/index.js",
    "src/controller/abr-controller.js",
    "src/controller/buffer-controller.js",
    "src/controller/level-controller.js",
    "src/demux/demuxer-inline.js",
    "src/demux/demuxer-worker.js",
    "src/demux/demuxer.js",
    "src/demux/exp-golomb.js",
    "src/demux/tsdemuxer.js",
    "src/errors.js",
    "src/events.js",
    "src/helper/level-helper.js",
    "src/hls.js",
    "src/loader/fragment-loader.js",
    "src/loader/playlist-loader.js",
    "src/remux/mp4-generator.js",
    "src/remux/mp4-remuxer.js",
    "src/utils/logger.js",
    "src/utils/xhr-loader.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;sBCnDkB,WAAW;;;;IAEvB,aAAa;AAEN,WAFP,aAAa,CAEL,GAAG,EAAE;0BAFb,aAAa;;AAGf,QAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACf,QAAI,CAAC,cAAc,GAAG,CAAC,CAAC;AACxB,QAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC;AAC5B,QAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;AACzB,QAAI,CAAC,KAAK,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACpD,OAAG,CAAC,EAAE,CAAC,oBAAM,kBAAkB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;GAC9C;;eATG,aAAa;;WAWV,mBAAG;AACR,UAAI,CAAC,GAAG,CAAC,GAAG,CAAC,oBAAM,kBAAkB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACpD;;;WAEqB,gCAAC,KAAK,EAAE,IAAI,EAAE;AAClC,UAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACvB,UAAI,KAAK,CAAC,OAAO,KAAK,SA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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n",
    "var bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn) {\n    var keys = [];\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n    \n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        if (cache[key].exports === fn) {\n            wkey = key;\n            break;\n        }\n    }\n    \n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            Function(['require','module','exports'], '(' + fn + ')(self)'),\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n    \n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        Function(['require'],'require(' + stringify(wkey) + ')(self)'),\n        scache\n    ];\n    \n    var src = '(' + bundleFn + ')({'\n        + Object.keys(sources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n    \n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n    \n    return new Worker(URL.createObjectURL(\n        new Blob([src], { type: 'text/javascript' })\n    ));\n};\n",
    "/*\n * simple ABR Controller\n*/\n\nimport Event from '../events';\n\nclass AbrController {\n\n  constructor(hls) {\n    this.hls = hls;\n    this.lastfetchlevel = 0;\n    this._autoLevelCapping = -1;\n    this._nextAutoLevel = -1;\n    this.onflp = this.onFragmentLoadProgress.bind(this);\n    hls.on(Event.FRAG_LOAD_PROGRESS, this.onflp);\n  }\n\n  destroy() {\n    this.hls.off(Event.FRAG_LOAD_PROGRESS, this.onflp);\n  }\n\n  onFragmentLoadProgress(event, data) {\n    var stats = data.stats;\n    if (stats.aborted === undefined) {\n      this.lastfetchduration = (new Date() - stats.trequest) / 1000;\n      this.lastfetchlevel = data.frag.level;\n      this.lastbw = (stats.loaded * 8) / this.lastfetchduration;\n      //console.log('fetchDuration:${this.lastfetchduration},bw:${(this.lastbw/1000).toFixed(0)}/${stats.aborted}');\n    }\n  }\n\n  /** Return the capping/max level value that could be used by automatic level selection algorithm **/\n  get autoLevelCapping() {\n    return this._autoLevelCapping;\n  }\n\n  /** set the capping/max level value that could be used by automatic level selection algorithm **/\n  set autoLevelCapping(newLevel) {\n    this._autoLevelCapping = newLevel;\n  }\n\n  get nextAutoLevel() {\n    var lastbw = this.lastbw, hls = this.hls,adjustedbw, i, maxAutoLevel;\n    if (this._autoLevelCapping === -1) {\n      maxAutoLevel = hls.levels.length - 1;\n    } else {\n      maxAutoLevel = this._autoLevelCapping;\n    }\n\n    if (this._nextAutoLevel !== -1) {\n      return Math.min(this._nextAutoLevel,maxAutoLevel);\n    }\n\n    // follow algorithm captured from stagefright :\n    // https://android.googlesource.com/platform/frameworks/av/+/master/media/libstagefright/httplive/LiveSession.cpp\n    // Pick the highest bandwidth stream below or equal to estimated bandwidth.\n    for (i = 0; i <= maxAutoLevel; i++) {\n    // consider only 80% of the available bandwidth, but if we are switching up,\n    // be even more conservative (70%) to avoid overestimating and immediately\n    // switching back.\n      if (i <= this.lastfetchlevel) {\n        adjustedbw = 0.8 * lastbw;\n      } else {\n        adjustedbw = 0.7 * lastbw;\n      }\n      if (adjustedbw < hls.levels[i].bitrate) {\n        return Math.max(0, i - 1);\n      }\n    }\n    return i - 1;\n  }\n\n  set nextAutoLevel(nextLevel) {\n    this._nextAutoLevel = nextLevel;\n  }\n}\n\nexport default AbrController;\n\n",
    "/*\n * Buffer Controller\n*/\n\nimport Event from '../events';\nimport {logger} from '../utils/logger';\nimport Demuxer from '../demux/demuxer';\nimport LevelHelper from '../helper/level-helper';\nimport {ErrorTypes, ErrorDetails} from '../errors';\n\nconst State = {\n  ERROR : -2,\n  STARTING : -1,\n  IDLE : 0,\n  LOADING : 1,\n  WAITING_LEVEL : 2,\n  PARSING : 3,\n  PARSED : 4,\n  APPENDING : 5,\n  BUFFER_FLUSHING : 6\n};\n\nclass BufferController {\n\n  constructor(hls) {\n    this.config = hls.config;\n    this.hls = hls;\n    // Source Buffer listeners\n    this.onsbue = this.onSBUpdateEnd.bind(this);\n    this.onsbe  = this.onSBUpdateError.bind(this);\n    // internal listeners\n    this.onmse = this.onMSEAttached.bind(this);\n    this.onmsed0 = this.onMSEDetaching.bind(this);\n    this.onmsed = this.onMSEDetached.bind(this);\n    this.onmp = this.onManifestParsed.bind(this);\n    this.onll = this.onLevelLoaded.bind(this);\n    this.onfl = this.onFragLoaded.bind(this);\n    this.onis = this.onInitSegment.bind(this);\n    this.onfpg = this.onFragParsing.bind(this);\n    this.onfp = this.onFragParsed.bind(this);\n    this.onerr = this.onError.bind(this);\n    this.ontick = this.tick.bind(this);\n    hls.on(Event.MSE_ATTACHED, this.onmse);\n    hls.on(Event.MSE_DETACHING, this.onmsed0);\n    hls.on(Event.MSE_DETACHED, this.onmsed);\n    hls.on(Event.MANIFEST_PARSED, this.onmp);\n  }\n\n  destroy() {\n    this.stop();\n    var hls = this.hls;\n    hls.off(Event.MSE_ATTACHED, this.onmse);\n    hls.off(Event.MSE_DETACHING, this.onmsed0);\n    hls.off(Event.MSE_DETACHED, this.onmsed);\n    hls.off(Event.MANIFEST_PARSED, this.onmp);\n    this.state = State.IDLE;\n  }\n\n  startLoad() {\n    if (this.levels && this.video) {\n      this.startInternal();\n      if (this.lastCurrentTime) {\n        logger.log(`seeking @ ${this.lastCurrentTime}`);\n        if (!this.lastPaused) {\n          logger.log('resuming video');\n          this.video.play();\n        }\n        this.state = State.IDLE;\n      } else {\n        this.lastCurrentTime = 0;\n        this.state = State.STARTING;\n      }\n      this.nextLoadPosition = this.startPosition = this.lastCurrentTime;\n      this.tick();\n    } else {\n      logger.warn('cannot start loading as either manifest not parsed or video not attached');\n    }\n  }\n\n  startInternal() {\n    var hls = this.hls;\n    this.stop();\n    this.demuxer = new Demuxer(hls);\n    this.timer = setInterval(this.ontick, 100);\n    this.level = -1;\n    hls.on(Event.FRAG_LOADED, this.onfl);\n    hls.on(Event.FRAG_PARSING_INIT_SEGMENT, this.onis);\n    hls.on(Event.FRAG_PARSING_DATA, this.onfpg);\n    hls.on(Event.FRAG_PARSED, this.onfp);\n    hls.on(Event.ERROR, this.onerr);\n    hls.on(Event.LEVEL_LOADED, this.onll);\n  }\n\n  stop() {\n    this.mp4segments = [];\n    this.flushRange = [];\n    this.bufferRange = [];\n    var frag = this.fragCurrent;\n    if (frag) {\n      if (frag.loader) {\n        frag.loader.abort();\n      }\n      this.fragCurrent = null;\n    }\n    this.fragPrevious = null;\n    if (this.sourceBuffer) {\n      for(var type in this.sourceBuffer) {\n        var sb = this.sourceBuffer[type];\n        try {\n          this.mediaSource.removeSourceBuffer(sb);\n          sb.removeEventListener('updateend', this.onsbue);\n          sb.removeEventListener('error', this.onsbe);\n        } catch(err) {\n        }\n      }\n      this.sourceBuffer = null;\n    }\n    if (this.timer) {\n      clearInterval(this.timer);\n      this.timer = null;\n    }\n    if (this.demuxer) {\n      this.demuxer.destroy();\n      this.demuxer = null;\n    }\n    var hls = this.hls;\n    hls.off(Event.FRAG_LOADED, this.onfl);\n    hls.off(Event.FRAG_PARSED, this.onfp);\n    hls.off(Event.FRAG_PARSING_DATA, this.onfpg);\n    hls.off(Event.LEVEL_LOADED, this.onll);\n    hls.off(Event.FRAG_PARSING_INIT_SEGMENT, this.onis);\n    hls.off(Event.ERROR, this.onerr);\n  }\n\n  tick() {\n    var pos, level, levelDetails, fragIdx, hls = this.hls;\n    switch(this.state) {\n      case State.ERROR:\n        //don't do anything in error state to avoid breaking further ...\n        break;\n      case State.STARTING:\n        // determine load level\n        this.startLevel = hls.startLevel;\n        if (this.startLevel === -1) {\n          // -1 : guess start Level by doing a bitrate test by loading first fragment of lowest quality level\n          this.startLevel = 0;\n          this.fragBitrateTest = true;\n        }\n        // set new level to playlist loader : this will trigger start level load\n        this.level = hls.nextLoadLevel = this.startLevel;\n        this.state = State.WAITING_LEVEL;\n        this.loadedmetadata = false;\n        break;\n      case State.IDLE:\n        // if video detached or unbound exit loop\n        if (!this.video) {\n          break;\n        }\n        // determine next candidate fragment to be loaded, based on current position and\n        //  end of buffer position\n        //  ensure 60s of buffer upfront\n        // if we have not yet loaded any fragment, start loading from start position\n        if (this.loadedmetadata) {\n          pos = this.video.currentTime;\n        } else {\n          pos = this.nextLoadPosition;\n        }\n        // determine next load level\n        if (this.startFragmentRequested === false) {\n          level = this.startLevel;\n        } else {\n          // we are not at playback start, get next load level from level Controller\n          level = hls.nextLoadLevel;\n        }\n        var bufferInfo = this.bufferInfo(pos,0.3), bufferLen = bufferInfo.len, bufferEnd = bufferInfo.end, maxBufLen;\n        // compute max Buffer Length that we could get from this load level, based on level bitrate. don't buffer more than 60 MB and more than 30s\n        if ((this.levels[level]).hasOwnProperty('bitrate')) {\n          maxBufLen = Math.max(8 * this.config.maxBufferSize / this.levels[level].bitrate, this.config.maxBufferLength);\n          maxBufLen = Math.min(maxBufLen, this.config.maxMaxBufferLength);\n        } else {\n          maxBufLen = this.config.maxBufferLength;\n        }\n        // if buffer length is less than maxBufLen try to load a new fragment\n        if (bufferLen < maxBufLen) {\n          // set next load level : this will trigger a playlist load if needed\n          hls.nextLoadLevel = level;\n          this.level = level;\n          levelDetails = this.levels[level].details;\n          // if level info not retrieved yet, switch state and wait for level retrieval\n          if (typeof levelDetails === 'undefined') {\n            this.state = State.WAITING_LEVEL;\n            break;\n          }\n          // find fragment index, contiguous with end of buffer position\n          let fragments = levelDetails.fragments,\n              fragLen = fragments.length,\n              start = fragments[0].start,\n              end = fragments[fragLen-1].start + fragments[fragLen-1].duration,\n              frag;\n\n            // in case of live playlist we need to ensure that requested position is not located before playlist start\n          if (levelDetails.live) {\n            // check if requested position is within seekable boundaries :\n            //logger.log(`start/pos/bufEnd/seeking:${start.toFixed(3)}/${pos.toFixed(3)}/${bufferEnd.toFixed(3)}/${this.video.seeking}`);\n            if (bufferEnd < Math.max(start,end-this.config.liveMaxLatencyDurationCount*levelDetails.targetduration)) {\n                this.seekAfterBuffered = start + Math.max(0, levelDetails.totalduration - this.config.liveSyncDurationCount * levelDetails.targetduration);\n                logger.log(`buffer end: ${bufferEnd} is located too far from the end of live sliding playlist, media position will be reseted to: ${this.seekAfterBuffered.toFixed(3)}`);\n                bufferEnd = this.seekAfterBuffered;\n            }\n            if (this.startFragmentRequested && !levelDetails.PTSKnown) {\n              /* we are switching level on live playlist, but we don't have any PTS info for that quality level ...\n                 try to load frag matching with next SN.\n                 even if SN are not synchronized between playlists, loading this frag will help us\n                 compute playlist sliding and find the right one after in case it was not the right consecutive one */\n              if (this.fragPrevious) {\n                var targetSN = this.fragPrevious.sn + 1;\n                if (targetSN >= levelDetails.startSN && targetSN <= levelDetails.endSN) {\n                  frag = fragments[targetSN - levelDetails.startSN];\n                  logger.log(`live playlist, switching playlist, load frag with next SN: ${frag.sn}`);\n                }\n              }\n              if (!frag) {\n                /* we have no idea about which fragment should be loaded.\n                   so let's load mid fragment. it will help computing playlist sliding and find the right one\n                */\n                frag = fragments[Math.round(fragLen / 2)];\n                logger.log(`live playlist, switching playlist, unknown, load middle frag : ${frag.sn}`);\n              }\n            }\n          } else {\n            // VoD playlist: if bufferEnd before start of playlist, load first fragment\n            if (bufferEnd < start) {\n              frag = fragments[0];\n            }\n          }\n          if (!frag) {\n            if (bufferEnd > end) {\n              // reach end of playlist\n              break;\n            }\n            for (fragIdx = 0; fragIdx < fragLen; fragIdx++) {\n              frag = fragments[fragIdx];\n              start = frag.start;\n              //logger.log('level/sn/sliding/start/end/bufEnd:${level}/${frag.sn}/${sliding.toFixed(3)}/${start.toFixed(3)}/${(start+frag.duration).toFixed(3)}/${bufferEnd.toFixed(3)}');\n              // offset should be within fragment boundary\n              if (start <= bufferEnd && (start + frag.duration) > bufferEnd) {\n                break;\n              }\n            }\n            //logger.log('find SN matching with pos:' +  bufferEnd + ':' + frag.sn);\n            if (this.fragPrevious && frag.level === this.fragPrevious.level && frag.sn === this.fragPrevious.sn) {\n              if (fragIdx === (fragLen-1)) {\n                // we are at the end of the playlist and we already loaded last fragment, don't do anything\n                break;\n              } else {\n                frag = fragments[fragIdx + 1];\n                logger.log(`SN just loaded, load next one: ${frag.sn}`);\n              }\n            }\n          }\n          logger.log(`Loading ${frag.sn} of [${levelDetails.startSN} ,${levelDetails.endSN}],level ${level}, currentTime:${pos},bufferEnd:${bufferEnd.toFixed(3)}`);\n          //logger.log('      loading frag ' + i +',pos/bufEnd:' + pos.toFixed(3) + '/' + bufferEnd.toFixed(3));\n          frag.autoLevel = hls.autoLevelEnabled;\n          if (this.levels.length > 1) {\n            frag.expectedLen = Math.round(frag.duration * this.levels[level].bitrate / 8);\n            frag.trequest = new Date();\n          }\n          // ensure that we are not reloading the same fragments in loop ...\n          if (this.fragLoadIdx !== undefined) {\n            this.fragLoadIdx++;\n          } else {\n            this.fragLoadIdx = 0;\n          }\n          if (frag.loadCounter) {\n            frag.loadCounter++;\n            let maxThreshold = this.config.fragLoadingLoopThreshold;\n            // if this frag has already been loaded 3 times, and if it has been reloaded recently\n            if (frag.loadCounter > maxThreshold && (Math.abs(this.fragLoadIdx - frag.loadIdx) < maxThreshold)) {\n              hls.trigger(Event.ERROR, {type: ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_LOOP_LOADING_ERROR, fatal: false, frag: frag});\n              return;\n            }\n          } else {\n            frag.loadCounter = 1;\n          }\n          frag.loadIdx = this.fragLoadIdx;\n          this.fragCurrent = frag;\n          this.startFragmentRequested = true;\n          hls.trigger(Event.FRAG_LOADING, {frag: frag});\n          this.state = State.LOADING;\n        }\n        break;\n      case State.WAITING_LEVEL:\n        level = this.levels[this.level];\n        // check if playlist is already loaded\n        if (level && level.details) {\n          this.state = State.IDLE;\n        }\n        break;\n      case State.LOADING:\n        /*\n          monitor fragment retrieval time...\n          we compute expected time of arrival of the complete fragment.\n          we compare it to expected time of buffer starvation\n        */\n        let v = this.video,frag = this.fragCurrent;\n        /* only monitor frag retrieval time if\n        (video not paused OR first fragment being loaded) AND autoswitching enabled AND not lowest level AND multiple levels */\n        if (v && (!v.paused || this.loadedmetadata === false) && frag.autoLevel && this.level && this.levels.length > 1) {\n          var requestDelay = new Date() - frag.trequest;\n          // monitor fragment load progress after half of expected fragment duration,to stabilize bitrate\n          if (requestDelay > (500 * frag.duration)) {\n            var loadRate = frag.loaded * 1000 / requestDelay; // byte/s\n            if (frag.expectedLen < frag.loaded) {\n              frag.expectedLen = frag.loaded;\n            }\n            pos = v.currentTime;\n            var fragLoadedDelay = (frag.expectedLen - frag.loaded) / loadRate;\n            var bufferStarvationDelay = this.bufferInfo(pos,0.3).end - pos;\n            var fragLevelNextLoadedDelay = frag.duration * this.levels[hls.nextLoadLevel].bitrate / (8 * loadRate); //bps/Bps\n            /* if we have less than 2 frag duration in buffer and if frag loaded delay is greater than buffer starvation delay\n              ... and also bigger than duration needed to load fragment at next level ...*/\n            if (bufferStarvationDelay < (2 * frag.duration) && fragLoadedDelay > bufferStarvationDelay && fragLoadedDelay > fragLevelNextLoadedDelay) {\n              // abort fragment loading ...\n              logger.warn('loading too slow, abort fragment loading');\n              logger.log(`fragLoadedDelay/bufferStarvationDelay/fragLevelNextLoadedDelay :${fragLoadedDelay.toFixed(1)}/${bufferStarvationDelay.toFixed(1)}/${fragLevelNextLoadedDelay.toFixed(1)}`);\n              //abort fragment loading\n              frag.loader.abort();\n              hls.trigger(Event.FRAG_LOAD_EMERGENCY_ABORTED, {frag: frag});\n              // switch back to IDLE state to request new fragment at lowest level\n              this.state = State.IDLE;\n            }\n          }\n        }\n        break;\n      case State.PARSING:\n        // nothing to do, wait for fragment being parsed\n        break;\n      case State.PARSED:\n      case State.APPENDING:\n        if (this.sourceBuffer) {\n          // if MP4 segment appending in progress nothing to do\n          if ((this.sourceBuffer.audio && this.sourceBuffer.audio.updating) ||\n             (this.sourceBuffer.video && this.sourceBuffer.video.updating)) {\n            //logger.log('sb append in progress');\n        // check if any MP4 segments left to append\n          } else if (this.mp4segments.length) {\n            var segment = this.mp4segments.shift();\n            try {\n              //logger.log('appending ${segment.type} SB, size:${segment.data.length}');\n              this.sourceBuffer[segment.type].appendBuffer(segment.data);\n              this.appendError = 0;\n            } catch(err) {\n              // in case any error occured while appending, put back segment in mp4segments table\n              logger.error(`error while trying to append buffer:${err.message},try appending later`);\n              this.mp4segments.unshift(segment);\n              if (this.appendError) {\n                this.appendError++;\n              } else {\n                this.appendError = 1;\n              }\n              var event = {type: ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_APPENDING_ERROR, frag: this.fragCurrent};\n              /* with UHD content, we could get loop of quota exceeded error until\n                browser is able to evict some data from sourcebuffer. retrying help recovering this\n              */\n              if (this.appendError > this.config.appendErrorMaxRetry) {\n                logger.log(`fail ${this.config.appendErrorMaxRetry} times to append segment in sourceBuffer`);\n                event.fatal = true;\n                hls.trigger(Event.ERROR, event);\n                this.state = State.ERROR;\n                return;\n              } else {\n                event.fatal = false;\n                hls.trigger(Event.ERROR, event);\n              }\n            }\n            this.state = State.APPENDING;\n          }\n        } else {\n          // sourceBuffer undefined, switch back to IDLE state\n          this.state = State.IDLE;\n        }\n        break;\n      case State.BUFFER_FLUSHING:\n        // loop through all buffer ranges to flush\n        while(this.flushRange.length) {\n          var range = this.flushRange[0];\n          // flushBuffer will abort any buffer append in progress and flush Audio/Video Buffer\n          if (this.flushBuffer(range.start, range.end)) {\n            // range flushed, remove from flush array\n            this.flushRange.shift();\n          } else {\n            // flush in progress, come back later\n            break;\n          }\n        }\n        if (this.flushRange.length === 0) {\n          // handle end of immediate switching if needed\n          if (this.immediateSwitch) {\n            this.immediateLevelSwitchEnd();\n          }\n          // move to IDLE once flush complete. this should trigger new fragment loading\n          this.state = State.IDLE;\n          // reset reference to frag\n          this.fragPrevious = null;\n        }\n         /* if not everything flushed, stay in BUFFER_FLUSHING state. we will come back here\n            each time sourceBuffer updateend() callback will be triggered\n            */\n        break;\n      default:\n        break;\n    }\n    // check/update current fragment\n    this._checkFragmentChanged();\n  }\n\n   bufferInfo(pos,maxHoleDuration) {\n    var v = this.video,\n        buffered = v.buffered,\n        bufferLen,\n        // bufferStart and bufferEnd are buffer boundaries around current video position\n        bufferStart, bufferEnd,bufferStartNext,\n        i;\n    var buffered2 = [];\n    // there might be some small holes between buffer time range\n    // consider that holes smaller than maxHoleDuration are irrelevant and build another\n    // buffer time range representations that discards those holes\n    for (i = 0; i < buffered.length; i++) {\n      //logger.log('buf start/end:' + buffered.start(i) + '/' + buffered.end(i));\n      if ((buffered2.length) && (buffered.start(i) - buffered2[buffered2.length - 1].end) < maxHoleDuration) {\n        buffered2[buffered2.length - 1].end = buffered.end(i);\n      } else {\n        buffered2.push({start: buffered.start(i), end: buffered.end(i)});\n      }\n    }\n    for (i = 0, bufferLen = 0, bufferStart = bufferEnd = pos; i < buffered2.length; i++) {\n      var start =  buffered2[i].start,\n          end = buffered2[i].end;\n      //logger.log('buf start/end:' + buffered.start(i) + '/' + buffered.end(i));\n      if ((pos + maxHoleDuration) >= start && pos < end) {\n        // play position is inside this buffer TimeRange, retrieve end of buffer position and buffer length\n        bufferStart = start;\n        bufferEnd = end + maxHoleDuration;\n        bufferLen = bufferEnd - pos;\n      } else if ((pos + maxHoleDuration) < start) {\n        bufferStartNext = start;\n      }\n    }\n    return {len: bufferLen, start: bufferStart, end: bufferEnd, nextStart : bufferStartNext};\n  }\n\n  getBufferRange(position) {\n    var i, range;\n    for (i = this.bufferRange.length - 1; i >=0; i--) {\n      range = this.bufferRange[i];\n      if (position >= range.start && position <= range.end) {\n        return range;\n      }\n    }\n    return null;\n  }\n\n  get currentLevel() {\n    if (this.video) {\n      var range = this.getBufferRange(this.video.currentTime);\n      if (range) {\n        return range.frag.level;\n      }\n    }\n    return -1;\n  }\n\n  get nextBufferRange() {\n    if (this.video) {\n      // first get end range of current fragment\n      return this.followingBufferRange(this.getBufferRange(this.video.currentTime));\n    } else {\n      return null;\n    }\n  }\n\n  followingBufferRange(range) {\n    if (range) {\n      // try to get range of next fragment (500ms after this range)\n      return this.getBufferRange(range.end + 0.5);\n    }\n    return null;\n  }\n\n  get nextLevel() {\n    var range = this.nextBufferRange;\n    if (range) {\n      return range.frag.level;\n    } else {\n      return -1;\n    }\n  }\n\n  isBuffered(position) {\n    var v = this.video, buffered = v.buffered;\n    for (var i = 0; i < buffered.length; i++) {\n      if (position >= buffered.start(i) && position <= buffered.end(i)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _checkFragmentChanged() {\n    var rangeCurrent, currentTime, video = this.video;\n    if (video && video.seeking === false) {\n      currentTime = video.currentTime;\n      /* if video element is in seeked state, currentTime can only increase.\n        (assuming that playback rate is positive ...)\n        As sometimes currentTime jumps back to zero after a\n        media decode error, check this, to avoid seeking back to\n        wrong position after a media decode error\n      */\n      if(currentTime > video.playbackRate*this.lastCurrentTime) {\n        this.lastCurrentTime = currentTime;\n      }\n      if (this.isBuffered(currentTime)) {\n        rangeCurrent = this.getBufferRange(currentTime);\n      } else if (this.isBuffered(currentTime + 0.1)) {\n        /* ensure that FRAG_CHANGED event is triggered at startup,\n          when first video frame is displayed and playback is paused.\n          add a tolerance of 100ms, in case current position is not buffered,\n          check if current pos+100ms is buffered and use that buffer range\n          for FRAG_CHANGED event reporting */\n        rangeCurrent = this.getBufferRange(currentTime + 0.1);\n      }\n      if (rangeCurrent) {\n        var fragPlaying = rangeCurrent.frag;\n        if (fragPlaying !== this.fragPlaying) {\n          this.fragPlaying = fragPlaying;\n          this.hls.trigger(Event.FRAG_CHANGED, {frag: fragPlaying});\n        }\n        // if stream is VOD (not live) and we reach End of Stream\n        var levelDetails = this.levels[this.level].details;\n        if (levelDetails && !levelDetails.live) {\n          // are we playing last fragment ?\n          if (fragPlaying.sn === levelDetails.endSN) {\n            var mediaSource = this.mediaSource;\n            if (mediaSource && mediaSource.readyState === 'open') {\n              logger.log('all media data available, signal endOfStream() to MediaSource');\n              //Notify the media element that it now has all of the media data\n              mediaSource.endOfStream();\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /*\n    abort any buffer append in progress, and flush all buffered data\n    return true once everything has been flushed.\n    sourceBuffer.abort() and sourceBuffer.remove() are asynchronous operations\n    the idea is to call this function from tick() timer and call it again until all resources have been cleaned\n    the timer is rearmed upon sourceBuffer updateend() event, so this should be optimal\n  */\n  flushBuffer(startOffset, endOffset) {\n    var sb, i, bufStart, bufEnd, flushStart, flushEnd;\n    //logger.log('flushBuffer,pos/start/end: ' + this.video.currentTime + '/' + startOffset + '/' + endOffset);\n    // safeguard to avoid infinite looping\n    if (this.flushBufferCounter++ < (2 * this.bufferRange.length) && this.sourceBuffer) {\n      for (var type in this.sourceBuffer) {\n        sb = this.sourceBuffer[type];\n        if (!sb.updating) {\n          for (i = 0; i < sb.buffered.length; i++) {\n            bufStart = sb.buffered.start(i);\n            bufEnd = sb.buffered.end(i);\n            // workaround firefox not able to properly flush multiple buffered range.\n            if (navigator.userAgent.toLowerCase().indexOf('firefox') !== -1 && endOffset === Number.POSITIVE_INFINITY) {\n              flushStart = startOffset;\n              flushEnd = endOffset;\n            } else {\n              flushStart = Math.max(bufStart, startOffset);\n              flushEnd = Math.min(bufEnd, endOffset);\n            }\n            /* sometimes sourcebuffer.remove() does not flush\n               the exact expected time range.\n               to avoid rounding issues/infinite loop,\n               only flush buffer range of length greater than 500ms.\n            */\n            if (flushEnd - flushStart > 0.5) {\n              logger.log(`flush ${type} [${flushStart},${flushEnd}], of [${bufStart},${bufEnd}], pos:${this.video.currentTime}`);\n              sb.remove(flushStart, flushEnd);\n              return false;\n            }\n          }\n        } else {\n          //logger.log('abort ' + type + ' append in progress');\n          // this will abort any appending in progress\n          //sb.abort();\n          return false;\n        }\n      }\n    }\n\n    /* after successful buffer flushing, rebuild buffer Range array\n      loop through existing buffer range and check if\n      corresponding range is still buffered. only push to new array already buffered range\n    */\n    var newRange = [],range;\n    for (i = 0; i < this.bufferRange.length; i++) {\n      range = this.bufferRange[i];\n      if (this.isBuffered((range.start + range.end) / 2)) {\n        newRange.push(range);\n      }\n    }\n    this.bufferRange = newRange;\n    logger.log('buffer flushed');\n    // everything flushed !\n    return true;\n  }\n\n  /*\n    on immediate level switch :\n     - pause playback if playing\n     - cancel any pending load request\n     - and trigger a buffer flush\n  */\n  immediateLevelSwitch() {\n    logger.log('immediateLevelSwitch');\n    if (!this.immediateSwitch) {\n      this.immediateSwitch = true;\n      this.previouslyPaused = this.video.paused;\n      this.video.pause();\n    }\n    var fragCurrent = this.fragCurrent;\n    if (fragCurrent && fragCurrent.loader) {\n      fragCurrent.loader.abort();\n    }\n    this.fragCurrent = null;\n    // flush everything\n    this.flushBufferCounter = 0;\n    this.flushRange.push({start: 0, end: Number.POSITIVE_INFINITY});\n    // trigger a sourceBuffer flush\n    this.state = State.BUFFER_FLUSHING;\n    // increase fragment load Index to avoid frag loop loading error after buffer flush\n    this.fragLoadIdx += 2 * this.config.fragLoadingLoopThreshold;\n    // speed up switching, trigger timer function\n    this.tick();\n  }\n\n  /*\n     on immediate level switch end, after new fragment has been buffered :\n      - nudge video decoder by slightly adjusting video currentTime\n      - resume the playback if needed\n  */\n  immediateLevelSwitchEnd() {\n    this.immediateSwitch = false;\n    this.video.currentTime -= 0.0001;\n    if (!this.previouslyPaused) {\n      this.video.play();\n    }\n  }\n\n  nextLevelSwitch() {\n    /* try to switch ASAP without breaking video playback :\n       in order to ensure smooth but quick level switching,\n      we need to find the next flushable buffer range\n      we should take into account new segment fetch time\n    */\n    var fetchdelay, currentRange, nextRange;\n    currentRange = this.getBufferRange(this.video.currentTime);\n    if (currentRange) {\n    // flush buffer preceding current fragment (flush until current fragment start offset)\n    // minus 1s to avoid video freezing, that could happen if we flush keyframe of current video ...\n      this.flushRange.push({start: 0, end: currentRange.start - 1});\n    }\n    if (!this.video.paused) {\n      // add a safety delay of 1s\n      var nextLevelId = this.hls.nextLoadLevel,nextLevel = this.levels[nextLevelId], fragLastKbps = this.fragLastKbps;\n      if (fragLastKbps && this.fragCurrent) {\n        fetchdelay = this.fragCurrent.duration * nextLevel.bitrate / (1000 * fragLastKbps) + 1;\n      } else {\n        fetchdelay = 0;\n      }\n    } else {\n      fetchdelay = 0;\n    }\n    //logger.log('fetchdelay:'+fetchdelay);\n    // find buffer range that will be reached once new fragment will be fetched\n    nextRange = this.getBufferRange(this.video.currentTime + fetchdelay);\n    if (nextRange) {\n      // we can flush buffer range following this one without stalling playback\n      nextRange = this.followingBufferRange(nextRange);\n      if (nextRange) {\n        // flush position is the start position of this new buffer\n        this.flushRange.push({start: nextRange.start, end: Number.POSITIVE_INFINITY});\n        // if we are here, we can also cancel any loading/demuxing in progress, as they are useless\n        var fragCurrent = this.fragCurrent;\n        if (fragCurrent && fragCurrent.loader) {\n          fragCurrent.loader.abort();\n        }\n        this.fragCurrent = null;\n      }\n    }\n    if (this.flushRange.length) {\n      this.flushBufferCounter = 0;\n      // trigger a sourceBuffer flush\n      this.state = State.BUFFER_FLUSHING;\n      // increase fragment load Index to avoid frag loop loading error after buffer flush\n      this.fragLoadIdx += 2 * this.config.fragLoadingLoopThreshold;\n      // speed up switching, trigger timer function\n      this.tick();\n    }\n  }\n\n  onMSEAttached(event, data) {\n    var video = data.video;\n    this.video = video;\n    this.mediaSource = data.mediaSource;\n    this.onvseeking = this.onVideoSeeking.bind(this);\n    this.onvseeked = this.onVideoSeeked.bind(this);\n    this.onvmetadata = this.onVideoMetadata.bind(this);\n    this.onvended = this.onVideoEnded.bind(this);\n    video.addEventListener('seeking', this.onvseeking);\n    video.addEventListener('seeked', this.onvseeked);\n    video.addEventListener('loadedmetadata', this.onvmetadata);\n    video.addEventListener('ended', this.onvended);\n    if(this.levels && this.config.autoStartLoad) {\n      this.startLoad();\n    }\n  }\n\n  onMSEDetaching() {\n    var video = this.video;\n    if (video && video.ended) {\n      logger.log('MSE detaching and video ended, reset startPosition');\n      this.startPosition = this.lastCurrentTime = 0;\n    }\n\n    // reset fragment loading counter on MSE detaching to avoid reporting FRAG_LOOP_LOADING_ERROR after error recovery\n    var levels = this._levels;\n    if (levels) {\n      // reset fragment load counter\n        levels.forEach(level => {\n          if(level.details) {\n            level.details.fragments.forEach(fragment => {\n              fragment.loadIdx = undefined;\n            });\n          }\n      });\n    }\n  }\n\n  onMSEDetached() {\n    // remove video listeners\n    var video = this.video;\n    if (video) {\n      video.removeEventListener('seeking', this.onvseeking);\n      video.removeEventListener('seeked', this.onvseeked);\n      video.removeEventListener('loadedmetadata', this.onvmetadata);\n      video.removeEventListener('ended', this.onvended);\n      this.onvseeking = this.onvseeked = this.onvmetadata = null;\n    }\n    this.video = null;\n    this.loadedmetadata = false;\n    this.stop();\n  }\n\n  onVideoSeeking() {\n    if (this.state === State.LOADING) {\n      // check if currently loaded fragment is inside buffer.\n      //if outside, cancel fragment loading, otherwise do nothing\n      if (this.bufferInfo(this.video.currentTime,0.3).len === 0) {\n        logger.log('seeking outside of buffer while fragment load in progress, cancel fragment load');\n        var fragCurrent = this.fragCurrent;\n        if (fragCurrent) {\n          fragCurrent.loader.abort();\n          this.fragCurrent = null;\n        }\n        this.fragPrevious = null;\n        // switch to IDLE state to load new fragment\n        this.state = State.IDLE;\n      }\n    }\n    if (this.video) {\n      this.lastCurrentTime = this.video.currentTime;\n    }\n    // avoid reporting fragment loop loading error in case user is seeking several times on same position\n    if (this.fragLoadIdx !== undefined) {\n      this.fragLoadIdx += 2 * this.config.fragLoadingLoopThreshold;\n    }\n    // tick to speed up processing\n    this.tick();\n  }\n\n  onVideoSeeked() {\n    // tick to speed up FRAGMENT_PLAYING triggering\n    this.tick();\n  }\n\n  onVideoMetadata() {\n    if (this.video.currentTime !== this.startPosition) {\n      this.video.currentTime = this.startPosition;\n    }\n    this.loadedmetadata = true;\n    this.tick();\n  }\n\n  onVideoEnded() {\n    logger.log('video ended');\n    // reset startPosition and lastCurrentTime to restart playback @ stream beginning\n    this.startPosition = this.lastCurrentTime = 0;\n  }\n\n\n  onManifestParsed(event, data) {\n    var aac = false, heaac = false, codecs;\n    data.levels.forEach(level => {\n      // detect if we have different kind of audio codecs used amongst playlists\n      codecs = level.codecs;\n      if (codecs) {\n        if (codecs.indexOf('mp4a.40.2') !== -1) {\n          aac = true;\n        }\n        if (codecs.indexOf('mp4a.40.5') !== -1) {\n          heaac = true;\n        }\n      }\n    });\n    this.audiocodecswitch = (aac && heaac);\n    if (this.audiocodecswitch) {\n      logger.log('both AAC/HE-AAC audio found in levels; declaring audio codec as HE-AAC');\n    }\n    this.levels = data.levels;\n    this.startLevelLoaded = false;\n    this.startFragmentRequested = false;\n    if (this.video && this.config.autoStartLoad) {\n      this.startLoad();\n    }\n  }\n\n  onLevelLoaded(event,data) {\n    var newDetails = data.details,\n        newLevelId = data.level,\n        curLevel = this.levels[newLevelId],\n        duration = newDetails.totalduration;\n\n    logger.log(`level ${newLevelId} loaded [${newDetails.startSN},${newDetails.endSN}],duration:${duration}`);\n\n    if (newDetails.live) {\n      var curDetails = curLevel.details;\n      if (curDetails) {\n        // we already have details for that level, merge them\n        LevelHelper.mergeDetails(curDetails,newDetails);\n        if (newDetails.PTSKnown) {\n          logger.log(`live playlist sliding:${newDetails.fragments[0].start.toFixed(3)}`);\n        } else {\n          logger.log('live playlist - outdated PTS, unknown sliding');\n        }\n      } else {\n        newDetails.PTSKnown = false;\n        logger.log('live playlist - first load, unknown sliding');\n      }\n    } else {\n      newDetails.PTSKnown = false;\n    }\n    // override level info\n    curLevel.details = newDetails;\n    this.hls.trigger(Event.LEVEL_UPDATED, { details: newDetails, level: newLevelId });\n\n    // compute start position\n    if (this.startLevelLoaded === false) {\n      // if live playlist, set start position to be fragment N-this.config.liveSyncDurationCount (usually 3)\n      if (newDetails.live) {\n        this.startPosition = Math.max(0, duration - this.config.liveSyncDurationCount * newDetails.targetduration);\n      }\n      this.nextLoadPosition = this.startPosition;\n      this.startLevelLoaded = true;\n    }\n    // only switch batck to IDLE state if we were waiting for level to start downloading a new fragment\n    if (this.state === State.WAITING_LEVEL) {\n      this.state = State.IDLE;\n    }\n    //trigger handler right now\n    this.tick();\n  }\n\n  onFragLoaded(event, data) {\n    var fragCurrent = this.fragCurrent;\n    if (this.state === State.LOADING &&\n        fragCurrent &&\n        data.frag.level === fragCurrent.level &&\n        data.frag.sn === fragCurrent.sn) {\n      if (this.fragBitrateTest === true) {\n        // switch back to IDLE state ... we just loaded a fragment to determine adequate start bitrate and initialize autoswitch algo\n        this.state = State.IDLE;\n        this.fragBitrateTest = false;\n        data.stats.tparsed = data.stats.tbuffered = new Date();\n        this.hls.trigger(Event.FRAG_BUFFERED, {stats: data.stats, frag: fragCurrent});\n      } else {\n        this.state = State.PARSING;\n        // transmux the MPEG-TS data to ISO-BMFF segments\n        this.stats = data.stats;\n        var currentLevel = this.levels[this.level],\n            details = currentLevel.details,\n            duration = details.totalduration,\n            start = fragCurrent.start,\n            level = fragCurrent.level,\n            sn = fragCurrent.sn;\n        logger.log(`Demuxing ${sn} of [${details.startSN} ,${details.endSN}],level ${level}`);\n        this.demuxer.push(data.payload, currentLevel.audioCodec, currentLevel.videoCodec, start, fragCurrent.cc, level, duration);\n      }\n    }\n  }\n\n  onInitSegment(event, data) {\n    if (this.state === State.PARSING) {\n      // check if codecs have been explicitely defined in the master playlist for this level;\n      // if yes use these ones instead of the ones parsed from the demux\n      var audioCodec = this.levels[this.level].audioCodec, videoCodec = this.levels[this.level].videoCodec, sb;\n      //logger.log('playlist level A/V codecs:' + audioCodec + ',' + videoCodec);\n      //logger.log('playlist codecs:' + codec);\n      // if playlist does not specify codecs, use codecs found while parsing fragment\n      if (audioCodec === undefined || data.audiocodec === undefined) {\n        audioCodec = data.audioCodec;\n      }\n      if (videoCodec === undefined || data.videocodec === undefined) {\n        videoCodec = data.videoCodec;\n      }\n      // in case several audio codecs might be used, force HE-AAC for audio (some browsers don't support audio codec switch)\n      //don't do it for mono streams ...\n      var ua = navigator.userAgent.toLowerCase();\n      if (this.audiocodecswitch &&\n         data.audioChannelCount !== 1 &&\n          ua.indexOf('android') === -1 &&\n          ua.indexOf('firefox') === -1) {\n        audioCodec = 'mp4a.40.5';\n      }\n      if (!this.sourceBuffer) {\n        this.sourceBuffer = {};\n        logger.log(`selected A/V codecs for sourceBuffers:${audioCodec},${videoCodec}`);\n        // create source Buffer and link them to MediaSource\n        if (audioCodec) {\n          sb = this.sourceBuffer.audio = this.mediaSource.addSourceBuffer(`video/mp4;codecs=${audioCodec}`);\n          sb.addEventListener('updateend', this.onsbue);\n          sb.addEventListener('error', this.onsbe);\n        }\n        if (videoCodec) {\n          sb = this.sourceBuffer.video = this.mediaSource.addSourceBuffer(`video/mp4;codecs=${videoCodec}`);\n          sb.addEventListener('updateend', this.onsbue);\n          sb.addEventListener('error', this.onsbe);\n        }\n      }\n      if (audioCodec) {\n        this.mp4segments.push({type: 'audio', data: data.audioMoov});\n      }\n      if(videoCodec) {\n        this.mp4segments.push({type: 'video', data: data.videoMoov});\n      }\n      //trigger handler right now\n      this.tick();\n    }\n  }\n\n  onFragParsing(event, data) {\n    if (this.state === State.PARSING) {\n      this.tparse2 = Date.now();\n      var level = this.levels[this.level],\n          frag = this.fragCurrent;\n      logger.log(`parsed data, type/startPTS/endPTS/startDTS/endDTS/nb:${data.type}/${data.startPTS.toFixed(3)}/${data.endPTS.toFixed(3)}/${data.startDTS.toFixed(3)}/${data.endDTS.toFixed(3)}/${data.nb}`);\n      var drift = LevelHelper.updateFragPTS(level.details,frag.sn,data.startPTS,data.endPTS);\n      this.hls.trigger(Event.LEVEL_PTS_UPDATED, {details: level.details, level: this.level, drift: drift});\n\n      this.mp4segments.push({type: data.type, data: data.moof});\n      this.mp4segments.push({type: data.type, data: data.mdat});\n      this.nextLoadPosition = data.endPTS;\n      this.bufferRange.push({type: data.type, start: data.startPTS, end: data.endPTS, frag: frag});\n\n      //trigger handler right now\n      this.tick();\n    } else {\n      logger.warn(`not in PARSING state, discarding ${event}`);\n    }\n  }\n\n  onFragParsed() {\n    if (this.state === State.PARSING) {\n      this.state = State.PARSED;\n      this.stats.tparsed = new Date();\n      //trigger handler right now\n      this.tick();\n    }\n  }\n\n  onError(event, data) {\n    switch(data.details) {\n      // abort fragment loading on errors\n      case ErrorDetails.FRAG_LOAD_ERROR:\n      case ErrorDetails.FRAG_LOAD_TIMEOUT:\n      case ErrorDetails.FRAG_LOOP_LOADING_ERROR:\n      case ErrorDetails.LEVEL_LOAD_ERROR:\n      case ErrorDetails.LEVEL_LOAD_TIMEOUT:\n        // if fatal error, stop processing, otherwise move to IDLE to retry loading\n        logger.warn(`buffer controller: ${data.details} while loading frag,switch to ${data.fatal ? 'ERROR' : 'IDLE'} state ...`);\n        this.state = data.fatal ? State.ERROR : State.IDLE;\n        break;\n      default:\n        break;\n    }\n  }\n\n  onSBUpdateEnd() {\n    //trigger handler right now\n    if (this.state === State.APPENDING && this.mp4segments.length === 0)  {\n      var frag = this.fragCurrent, stats = this.stats;\n      if (frag) {\n        this.fragPrevious = frag;\n        stats.tbuffered = new Date();\n        this.fragLastKbps = Math.round(8 * stats.length / (stats.tbuffered - stats.tfirst));\n        this.hls.trigger(Event.FRAG_BUFFERED, {stats: stats, frag: frag});\n        logger.log(`video buffered : ${this.timeRangesToString(this.video.buffered)}`);\n        this.state = State.IDLE;\n      }\n      var video = this.video;\n      if(video) {\n        // seek back to a expected position after video buffered if needed\n        if (this.seekAfterBuffered) {\n          video.currentTime = this.seekAfterBuffered;\n        } else {\n          var currentTime = video.currentTime;\n          var bufferInfo = this.bufferInfo(currentTime,0);\n          // check if current time is buffered or not\n          if(bufferInfo.len === 0) {\n            // no buffer available @ currentTime, check if next buffer is close (in a 300 ms range)\n            var nextBufferStart = bufferInfo.nextStart;\n            if(nextBufferStart && (nextBufferStart - currentTime < 0.3)) {\n              // next buffer is close ! adjust currentTime to nextBufferStart\n              // this will ensure effective video decoding\n              logger.log(`adjust currentTime from ${currentTime} to ${nextBufferStart}`);\n              video.currentTime = nextBufferStart;\n            }\n          }\n        }\n      }\n      // reset this variable, whether it was set or not\n      this.seekAfterBuffered = undefined;\n    }\n    this.tick();\n  }\n\n  onSBUpdateError(event) {\n    logger.error(`sourceBuffer error:${event}`);\n    this.state = State.ERROR;\n    this.hls.trigger(Event.ERROR, {type: ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_APPENDING_ERROR, fatal: true, frag: this.fragCurrent});\n  }\n\n  timeRangesToString(r) {\n    var log = '', len = r.length;\n    for (var i=0; i<len; i++) {\n      log += '[' + r.start(i) + ',' + r.end(i) + ']';\n    }\n    return log;\n  }\n}\nexport default BufferController;\n\n",
    "/*\n * Level Controller\n*/\n\nimport Event from '../events';\nimport {logger} from '../utils/logger';\nimport {ErrorTypes, ErrorDetails} from '../errors';\n\nclass LevelController {\n\n  constructor(hls) {\n    this.hls = hls;\n    this.onml = this.onManifestLoaded.bind(this);\n    this.onll = this.onLevelLoaded.bind(this);\n    this.onerr = this.onError.bind(this);\n    this.ontick = this.tick.bind(this);\n    hls.on(Event.MANIFEST_LOADED, this.onml);\n    hls.on(Event.LEVEL_LOADED, this.onll);\n    hls.on(Event.ERROR, this.onerr);\n    this._manualLevel = this._autoLevelCapping = -1;\n  }\n\n  destroy() {\n    var hls = this.hls;\n    hls.off(Event.MANIFEST_LOADED, this.onml);\n    hls.off(Event.LEVEL_LOADED, this.onll);\n    hls.off(Event.ERROR, this.onerr);\n    if (this.timer) {\n     clearInterval(this.timer);\n    }\n    this._manualLevel = -1;\n  }\n\n  onManifestLoaded(event, data) {\n    var levels0 = [], levels = [], bitrateStart, i, bitrateSet = {}, videoCodecFound = false, audioCodecFound = false;\n\n    // regroup redundant level together\n    data.levels.forEach(level => {\n      if(level.videoCodec) {\n        videoCodecFound = true;\n      }\n      if(level.audioCodec) {\n        audioCodecFound = true;\n      }\n      var redundantLevelId = bitrateSet[level.bitrate];\n      if (redundantLevelId === undefined) {\n        bitrateSet[level.bitrate] = levels.length;\n        level.url = [level.url];\n        level.urlId = 0;\n        levels0.push(level);\n      } else {\n        levels0[redundantLevelId].url.push(level.url);\n      }\n    });\n\n    // remove audio-only level if we also have levels with audio+video codecs signalled\n    if(videoCodecFound && audioCodecFound) {\n      levels0.forEach(level => {\n        if(level.videoCodec) {\n          levels.push(level);\n        }\n      });\n    } else {\n      levels = levels0;\n    }\n\n    // start bitrate is the first bitrate of the manifest\n    bitrateStart = levels[0].bitrate;\n    // sort level on bitrate\n    levels.sort(function (a, b) {\n      return a.bitrate - b.bitrate;\n    });\n    this._levels = levels;\n    // find index of first level in sorted levels\n    for (i = 0; i < levels.length; i++) {\n      if (levels[i].bitrate === bitrateStart) {\n        this._firstLevel = i;\n        logger.log(`manifest loaded,${levels.length} level(s) found, first bitrate:${bitrateStart}`);\n        break;\n      }\n    }\n    this.hls.trigger(Event.MANIFEST_PARSED, {levels: this._levels, firstLevel: this._firstLevel, stats: data.stats});\n    return;\n  }\n\n  get levels() {\n    return this._levels;\n  }\n\n  get level() {\n    return this._level;\n  }\n\n  set level(newLevel) {\n    if (this._level !== newLevel || this._levels[newLevel].details === undefined) {\n      this.setLevelInternal(newLevel);\n    }\n  }\n\n setLevelInternal(newLevel) {\n    // check if level idx is valid\n    if (newLevel >= 0 && newLevel < this._levels.length) {\n      // stopping live reloading timer if any\n      if (this.timer) {\n       clearInterval(this.timer);\n       this.timer = null;\n      }\n      this._level = newLevel;\n      logger.log(`switching to level ${newLevel}`);\n      this.hls.trigger(Event.LEVEL_SWITCH, {level: newLevel});\n      var level = this._levels[newLevel];\n       // check if we need to load playlist for this level\n      if (level.details === undefined || level.details.live === true) {\n        // level not retrieved yet, or live playlist we need to (re)load it\n        logger.log(`(re)loading playlist for level ${newLevel}`);\n        var urlId = level.urlId;\n        this.hls.trigger(Event.LEVEL_LOADING, {url: level.url[urlId], level: newLevel, id: urlId});\n      }\n    } else {\n      // invalid level id given, trigger error\n      this.hls.trigger(Event.ERROR, {type : ErrorTypes.OTHER_ERROR, details: ErrorDetails.LEVEL_SWITCH_ERROR, level: newLevel, fatal: false, reason: 'invalid level idx'});\n    }\n }\n\n  get manualLevel() {\n    return this._manualLevel;\n  }\n\n  set manualLevel(newLevel) {\n    this._manualLevel = newLevel;\n    if (newLevel !== -1) {\n      this.level = newLevel;\n    }\n  }\n\n  get firstLevel() {\n    return this._firstLevel;\n  }\n\n  set firstLevel(newLevel) {\n    this._firstLevel = newLevel;\n  }\n\n  get startLevel() {\n    if (this._startLevel === undefined) {\n      return this._firstLevel;\n    } else {\n      return this._startLevel;\n    }\n  }\n\n  set startLevel(newLevel) {\n    this._startLevel = newLevel;\n  }\n\n  onError(event, data) {\n    if(data.fatal) {\n      return;\n    }\n\n    var details = data.details, hls = this.hls, levelId, level;\n    // try to recover not fatal errors\n    switch(details) {\n      case ErrorDetails.FRAG_LOAD_ERROR:\n      case ErrorDetails.FRAG_LOAD_TIMEOUT:\n      case ErrorDetails.FRAG_LOOP_LOADING_ERROR:\n         levelId = data.frag.level;\n         break;\n      case ErrorDetails.LEVEL_LOAD_ERROR:\n      case ErrorDetails.LEVEL_LOAD_TIMEOUT:\n        levelId = data.level;\n        break;\n      default:\n        break;\n    }\n    /* try to switch to a redundant stream if any available.\n     * if no redundant stream available, emergency switch down (if in auto mode and current level not 0)\n     * otherwise, we cannot recover this network error ....\n     */\n    if (levelId !== undefined) {\n      level = this._levels[levelId];\n      if (level.urlId < (level.url.length - 1)) {\n        level.urlId++;\n        level.details = undefined;\n        logger.warn(`level controller,${details} for level ${levelId}: switching to redundant stream id ${level.urlId}`);\n      } else {\n        // we could try to recover if in auto mode and current level not lowest level (0)\n        let recoverable = ((this._manualLevel === -1) && levelId);\n        if (recoverable) {\n          logger.warn(`level controller,${details}: emergency switch-down for next fragment`);\n          hls.abrController.nextAutoLevel = 0;\n        } else if(level && level.details && level.details.live) {\n          logger.warn(`level controller,${details} on live stream, discard`);\n        } else {\n          logger.error(`cannot recover ${details} error`);\n          this._level = undefined;\n          // stopping live reloading timer if any\n          if (this.timer) {\n            clearInterval(this.timer);\n            this.timer = null;\n          }\n          // redispatch same error but with fatal set to true\n          data.fatal = true;\n          hls.trigger(event, data);\n        }\n      }\n    }\n  }\n\n  onLevelLoaded(event, data) {\n    // check if current playlist is a live playlist\n    if (data.details.live && !this.timer) {\n      // if live playlist we will have to reload it periodically\n      // set reload period to playlist target duration\n      this.timer = setInterval(this.ontick, 1000 * data.details.targetduration);\n    }\n    if (!data.details.live && this.timer) {\n      // playlist is not live and timer is armed : stopping it\n      clearInterval(this.timer);\n      this.timer = null;\n    }\n  }\n\n  tick() {\n    var levelId = this._level;\n    if (levelId !== undefined) {\n      var level = this._levels[levelId], urlId = level.urlId;\n      this.hls.trigger(Event.LEVEL_LOADING, {url: level.url[urlId], level: levelId, id: urlId});\n    }\n  }\n\n  nextLoadLevel() {\n    if (this._manualLevel !== -1) {\n      return this._manualLevel;\n    } else {\n     return this.hls.abrController.nextAutoLevel;\n    }\n  }\n}\n\nexport default LevelController;\n\n",
    "/*  inline demuxer.\n *   probe fragments and instantiate appropriate demuxer depending on content type (TSDemuxer, AACDemuxer, ...)\n */\n\nimport Event from '../events';\nimport {ErrorTypes, ErrorDetails} from '../errors';\nimport TSDemuxer from '../demux/tsdemuxer';\n\nclass DemuxerInline {\n\n  constructor(hls,remuxer) {\n    this.hls = hls;\n    this.remuxer = remuxer;\n  }\n\n  destroy() {\n    var demuxer = this.demuxer;\n    if (demuxer) {\n      demuxer.destroy();\n    }\n  }\n\n  push(data, audioCodec, videoCodec, timeOffset, cc, level, duration) {\n    var demuxer = this.demuxer;\n    if (!demuxer) {\n      // probe for content type\n      if(TSDemuxer.probe(data)) {\n        demuxer = this.demuxer = new TSDemuxer(this.hls,this.remuxer);\n      } else {\n        this.hls.trigger(Event.ERROR, {type : ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_PARSING_ERROR, fatal: true, reason: 'no demux matching with content found'});\n        return;\n      }\n    }\n    demuxer.push(data,audioCodec,videoCodec,timeOffset,cc,level,duration);\n  }\n\n  remux() {\n    var demuxer = this.demuxer;\n    if(demuxer) {\n      demuxer.remux();\n    }\n  }\n}\n\nexport default DemuxerInline;\n",
    "/* demuxer web worker. \n *  - listen to worker message, and trigger DemuxerInline upon reception of Fragments.\n *  - provides MP4 Boxes back to main thread using [transferable objects](https://developers.google.com/web/updates/2011/12/Transferable-Objects-Lightning-Fast) in order to minimize message passing overhead.\n */\n \n import DemuxerInline from '../demux/demuxer-inline';\n import Event from '../events';\n import EventEmitter from 'events';\n import MP4Remuxer from '../remux/mp4-remuxer';\n\nvar DemuxerWorker = function (self) {\n  // observer setup\n  var observer = new EventEmitter();\n  observer.trigger = function trigger (event, ...data) {\n    observer.emit(event, event, ...data);\n  };\n\n  observer.off = function off (event, ...data) {\n    observer.removeListener(event, ...data);\n  };\n  self.addEventListener('message', function (ev) {\n    //console.log('demuxer cmd:' + ev.data.cmd);\n    switch (ev.data.cmd) {\n      case 'init':\n        self.demuxer = new DemuxerInline(observer,MP4Remuxer);\n        break;\n      case 'demux':\n        self.demuxer.push(new Uint8Array(ev.data.data), ev.data.audioCodec, ev.data.videoCodec, ev.data.timeOffset, ev.data.cc, ev.data.level, ev.data.duration);\n        self.demuxer.remux();\n        break;\n      default:\n        break;\n    }\n  });\n\n  // listen to events triggered by TS Demuxer\n  observer.on(Event.FRAG_PARSING_INIT_SEGMENT, function(ev, data) {\n    var objData = {event: ev};\n    var objTransferable = [];\n    if (data.audioCodec) {\n      objData.audioCodec = data.audioCodec;\n      objData.audioMoov = data.audioMoov.buffer;\n      objData.audioChannelCount = data.audioChannelCount;\n      objTransferable.push(objData.audioMoov);\n    }\n    if (data.videoCodec) {\n      objData.videoCodec = data.videoCodec;\n      objData.videoMoov = data.videoMoov.buffer;\n      objData.videoWidth = data.videoWidth;\n      objData.videoHeight = data.videoHeight;\n      objTransferable.push(objData.videoMoov);\n    }\n    // pass moov as transferable object (no copy)\n    self.postMessage(objData,objTransferable);\n  });\n\n  observer.on(Event.FRAG_PARSING_DATA, function(ev, data) {\n    var objData = {event: ev, type: data.type, startPTS: data.startPTS, endPTS: data.endPTS, startDTS: data.startDTS, endDTS: data.endDTS, moof: data.moof.buffer, mdat: data.mdat.buffer, nb: data.nb};\n    // pass moof/mdat data as transferable object (no copy)\n    self.postMessage(objData, [objData.moof, objData.mdat]);\n  });\n\n  observer.on(Event.FRAG_PARSED, function(event) {\n    self.postMessage({event: event});\n  });\n\n  observer.on(Event.ERROR, function(event, data) {\n    self.postMessage({event: event, data: data});\n  });\n\n  observer.on(Event.FRAG_PARSING_METADATA, function(event, data) {\n    var objData = {event: event, samples: data.samples};\n    self.postMessage(objData);\n  });\n};\n\nexport default DemuxerWorker;\n\n",
    "import Event from '../events';\nimport DemuxerInline from '../demux/demuxer-inline';\nimport DemuxerWorker from '../demux/demuxer-worker';\nimport {logger} from '../utils/logger';\nimport MP4Remuxer from '../remux/mp4-remuxer';\n\nclass Demuxer {\n\n  constructor(hls) {\n    this.hls = hls;\n    if (hls.config.enableWorker && (typeof(Worker) !== 'undefined')) {\n        logger.log('demuxing in webworker');\n        try {\n          var work = require('webworkify');\n          this.w = work(DemuxerWorker);\n          this.onwmsg = this.onWorkerMessage.bind(this);\n          this.w.addEventListener('message', this.onwmsg);\n          this.w.postMessage({cmd: 'init'});\n        } catch(err) {\n          logger.error('error while initializing DemuxerWorker, fallback on DemuxerInline');\n          this.demuxer = new DemuxerInline(hls,MP4Remuxer);\n        }\n      } else {\n        this.demuxer = new DemuxerInline(hls,MP4Remuxer);\n      }\n      this.demuxInitialized = true;\n  }\n\n  destroy() {\n    if (this.w) {\n      this.w.removeEventListener('message', this.onwmsg);\n      this.w.terminate();\n      this.w = null;\n    } else {\n      this.demuxer.destroy();\n    }\n  }\n\n  push(data, audioCodec, videoCodec, timeOffset, cc, level, duration) {\n    if (this.w) {\n      // post fragment payload as transferable objects (no copy)\n      this.w.postMessage({cmd: 'demux', data: data, audioCodec: audioCodec, videoCodec: videoCodec, timeOffset: timeOffset, cc: cc, level: level, duration: duration}, [data]);\n    } else {\n      this.demuxer.push(new Uint8Array(data), audioCodec, videoCodec, timeOffset, cc, level, duration);\n      this.demuxer.remux();\n    }\n  }\n\n  onWorkerMessage(ev) {\n    //console.log('onWorkerMessage:' + ev.data.event);\n    switch(ev.data.event) {\n      case Event.FRAG_PARSING_INIT_SEGMENT:\n        var obj = {};\n        if (ev.data.audioMoov) {\n          obj.audioMoov = new Uint8Array(ev.data.audioMoov);\n          obj.audioCodec = ev.data.audioCodec;\n          obj.audioChannelCount = ev.data.audioChannelCount;\n        }\n        if (ev.data.videoMoov) {\n          obj.videoMoov = new Uint8Array(ev.data.videoMoov);\n          obj.videoCodec = ev.data.videoCodec;\n          obj.videoWidth = ev.data.videoWidth;\n          obj.videoHeight = ev.data.videoHeight;\n        }\n        this.hls.trigger(Event.FRAG_PARSING_INIT_SEGMENT, obj);\n        break;\n      case Event.FRAG_PARSING_DATA:\n        this.hls.trigger(Event.FRAG_PARSING_DATA,{\n          moof: new Uint8Array(ev.data.moof),\n          mdat: new Uint8Array(ev.data.mdat),\n          startPTS: ev.data.startPTS,\n          endPTS: ev.data.endPTS,\n          startDTS: ev.data.startDTS,\n          endDTS: ev.data.endDTS,\n          type: ev.data.type,\n          nb: ev.data.nb\n        });\n        break;\n        case Event.FRAG_PARSING_METADATA:\n        this.hls.trigger(Event.FRAG_PARSING_METADATA, {\n          samples: ev.data.samples\n        });\n        break;\n      default:\n        this.hls.trigger(ev.data.event, ev.data.data);\n        break;\n    }\n  }\n}\n\nexport default Demuxer;\n\n",
    "/**\n * Parser for exponential Golomb codes, a variable-bitwidth number encoding scheme used by h264.\n*/\n\nimport {logger} from '../utils/logger';\n\nclass ExpGolomb {\n\n  constructor(data) {\n    this.data = data;\n    // the number of bytes left to examine in this.data\n    this.bytesAvailable = this.data.byteLength;\n    // the current word being examined\n    this.word = 0; // :uint\n    // the number of bits left to examine in the current word\n    this.bitsAvailable = 0; // :uint\n  }\n\n  // ():void\n  loadWord() {\n    var\n      position = this.data.byteLength - this.bytesAvailable,\n      workingBytes = new Uint8Array(4),\n      availableBytes = Math.min(4, this.bytesAvailable);\n    if (availableBytes === 0) {\n      throw new Error('no bytes available');\n    }\n    workingBytes.set(this.data.subarray(position, position + availableBytes));\n    this.word = new DataView(workingBytes.buffer).getUint32(0);\n    // track the amount of this.data that has been processed\n    this.bitsAvailable = availableBytes * 8;\n    this.bytesAvailable -= availableBytes;\n  }\n\n  // (count:int):void\n  skipBits(count) {\n    var skipBytes; // :int\n    if (this.bitsAvailable > count) {\n      this.word <<= count;\n      this.bitsAvailable -= count;\n    } else {\n      count -= this.bitsAvailable;\n      skipBytes = count >> 3;\n      count -= (skipBytes >> 3);\n      this.bytesAvailable -= skipBytes;\n      this.loadWord();\n      this.word <<= count;\n      this.bitsAvailable -= count;\n    }\n  }\n\n  // (size:int):uint\n  readBits(size) {\n    var\n      bits = Math.min(this.bitsAvailable, size), // :uint\n      valu = this.word >>> (32 - bits); // :uint\n    if (size > 32) {\n      logger.error('Cannot read more than 32 bits at a time');\n    }\n    this.bitsAvailable -= bits;\n    if (this.bitsAvailable > 0) {\n      this.word <<= bits;\n    } else if (this.bytesAvailable > 0) {\n      this.loadWord();\n    }\n    bits = size - bits;\n    if (bits > 0) {\n      return valu << bits | this.readBits(bits);\n    } else {\n      return valu;\n    }\n  }\n\n  // ():uint\n  skipLZ() {\n    var leadingZeroCount; // :uint\n    for (leadingZeroCount = 0; leadingZeroCount < this.bitsAvailable; ++leadingZeroCount) {\n      if (0 !== (this.word & (0x80000000 >>> leadingZeroCount))) {\n        // the first bit of working word is 1\n        this.word <<= leadingZeroCount;\n        this.bitsAvailable -= leadingZeroCount;\n        return leadingZeroCount;\n      }\n    }\n    // we exhausted word and still have not found a 1\n    this.loadWord();\n    return leadingZeroCount + this.skipLZ();\n  }\n\n  // ():void\n  skipUEG() {\n    this.skipBits(1 + this.skipLZ());\n  }\n\n  // ():void\n  skipEG() {\n    this.skipBits(1 + this.skipLZ());\n  }\n\n  // ():uint\n  readUEG() {\n    var clz = this.skipLZ(); // :uint\n    return this.readBits(clz + 1) - 1;\n  }\n\n  // ():int\n  readEG() {\n    var valu = this.readUEG(); // :int\n    if (0x01 & valu) {\n      // the number is odd if the low order bit is set\n      return (1 + valu) >>> 1; // add 1 to make it even, and divide by 2\n    } else {\n      return -1 * (valu >>> 1); // divide by two then make it negative\n    }\n  }\n\n  // Some convenience functions\n  // :Boolean\n  readBoolean() {\n    return 1 === this.readBits(1);\n  }\n\n  // ():int\n  readUByte() {\n    return this.readBits(8);\n  }\n\n  /**\n   * Advance the ExpGolomb decoder past a scaling list. The scaling\n   * list is optionally transmitted as part of a sequence parameter\n   * set and is not relevant to transmuxing.\n   * @param count {number} the number of entries in this scaling list\n   * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\n   */\n  skipScalingList(count) {\n    var\n      lastScale = 8,\n      nextScale = 8,\n      j,\n      deltaScale;\n    for (j = 0; j < count; j++) {\n      if (nextScale !== 0) {\n        deltaScale = this.readEG();\n        nextScale = (lastScale + deltaScale + 256) % 256;\n      }\n      lastScale = (nextScale === 0) ? lastScale : nextScale;\n    }\n  }\n\n  /**\n   * Read a sequence parameter set and return some interesting video\n   * properties. A sequence parameter set is the H264 metadata that\n   * describes the properties of upcoming video frames.\n   * @param data {Uint8Array} the bytes of a sequence parameter set\n   * @return {object} an object with configuration parsed from the\n   * sequence parameter set, including the dimensions of the\n   * associated video frames.\n   */\n  readSPS() {\n    var\n      frameCropLeftOffset = 0,\n      frameCropRightOffset = 0,\n      frameCropTopOffset = 0,\n      frameCropBottomOffset = 0,\n      profileIdc,profileCompat,levelIdc,\n      numRefFramesInPicOrderCntCycle, picWidthInMbsMinus1,\n      picHeightInMapUnitsMinus1,\n      frameMbsOnlyFlag,\n      scalingListCount,\n      i;\n    this.readUByte();\n    profileIdc = this.readUByte(); // profile_idc\n    profileCompat = this.readBits(5); // constraint_set[0-4]_flag, u(5)\n    this.skipBits(3); // reserved_zero_3bits u(3),\n    levelIdc = this.readUByte(); //level_idc u(8)\n    this.skipUEG(); // seq_parameter_set_id\n    // some profiles have more optional data we don't need\n    if (profileIdc === 100 ||\n        profileIdc === 110 ||\n        profileIdc === 122 ||\n        profileIdc === 144) {\n      var chromaFormatIdc = this.readUEG();\n      if (chromaFormatIdc === 3) {\n        this.skipBits(1); // separate_colour_plane_flag\n      }\n      this.skipUEG(); // bit_depth_luma_minus8\n      this.skipUEG(); // bit_depth_chroma_minus8\n      this.skipBits(1); // qpprime_y_zero_transform_bypass_flag\n      if (this.readBoolean()) { // seq_scaling_matrix_present_flag\n        scalingListCount = (chromaFormatIdc !== 3) ? 8 : 12;\n        for (i = 0; i < scalingListCount; i++) {\n          if (this.readBoolean()) { // seq_scaling_list_present_flag[ i ]\n            if (i < 6) {\n              this.skipScalingList(16);\n            } else {\n              this.skipScalingList(64);\n            }\n          }\n        }\n      }\n    }\n    this.skipUEG(); // log2_max_frame_num_minus4\n    var picOrderCntType = this.readUEG();\n    if (picOrderCntType === 0) {\n      this.readUEG(); //log2_max_pic_order_cnt_lsb_minus4\n    } else if (picOrderCntType === 1) {\n      this.skipBits(1); // delta_pic_order_always_zero_flag\n      this.skipEG(); // offset_for_non_ref_pic\n      this.skipEG(); // offset_for_top_to_bottom_field\n      numRefFramesInPicOrderCntCycle = this.readUEG();\n      for(i = 0; i < numRefFramesInPicOrderCntCycle; i++) {\n        this.skipEG(); // offset_for_ref_frame[ i ]\n      }\n    }\n    this.skipUEG(); // max_num_ref_frames\n    this.skipBits(1); // gaps_in_frame_num_value_allowed_flag\n    picWidthInMbsMinus1 = this.readUEG();\n    picHeightInMapUnitsMinus1 = this.readUEG();\n    frameMbsOnlyFlag = this.readBits(1);\n    if (frameMbsOnlyFlag === 0) {\n      this.skipBits(1); // mb_adaptive_frame_field_flag\n    }\n    this.skipBits(1); // direct_8x8_inference_flag\n    if (this.readBoolean()) { // frame_cropping_flag\n      frameCropLeftOffset = this.readUEG();\n      frameCropRightOffset = this.readUEG();\n      frameCropTopOffset = this.readUEG();\n      frameCropBottomOffset = this.readUEG();\n    }\n    return {\n      profileIdc : profileIdc,\n      profileCompat : profileCompat,\n      levelIdc : levelIdc,\n      width: ((picWidthInMbsMinus1 + 1) * 16) - frameCropLeftOffset * 2 - frameCropRightOffset * 2,\n      height: ((2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16) - (frameCropTopOffset * 2) - (frameCropBottomOffset * 2)\n    };\n  }\n\n  readSliceType() {\n    // skip NALu type\n    this.readUByte();\n    // discard first_mb_in_slice\n    this.readUEG();\n    // return slice_type\n    return this.readUEG();\n  }\n}\n\nexport default ExpGolomb;\n",
    "/**\n * highly optimized TS demuxer:\n * parse PAT, PMT\n * extract PES packet from audio and video PIDs\n * extract AVC/H264 NAL units and AAC/ADTS samples from PES packet\n * trigger the remuxer upon parsing completion\n * it also tries to workaround as best as it can audio codec switch (HE-AAC to AAC and vice versa), without having to restart the MediaSource.\n * it also controls the remuxing process :\n * upon discontinuity or level switch detection, it will also notifies the remuxer so that it can reset its state.\n*/\n\n import Event from '../events';\n import ExpGolomb from './exp-golomb';\n// import Hex from '../utils/hex';\n import {logger} from '../utils/logger';\n import {ErrorTypes, ErrorDetails} from '../errors';\n\n class TSDemuxer {\n\n  constructor(observer,remuxerClass) {\n    this.observer = observer;\n    this.remuxerClass = remuxerClass;\n    this.lastCC = 0;\n    this.PES_TIMESCALE = 90000;\n    this.remuxer = new this.remuxerClass(observer);\n  }\n\n  static probe(data) {\n    // a TS fragment should contain at least 3 TS packets, a PAT, a PMT, and one PID, each starting with 0x47\n    if (data.length >= 3*188 && data[0] === 0x47 && data[188] === 0x47 && data[2*188] === 0x47) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  switchLevel() {\n    this.pmtParsed = false;\n    this._pmtId = -1;\n    this._avcTrack = {type: 'video', id :-1, sequenceNumber: 0, samples : [], len : 0, nbNalu : 0};\n    this._aacTrack = {type: 'audio', id :-1, sequenceNumber: 0, samples : [], len : 0};\n    this._id3Track = {type: 'id3', id :-1, sequenceNumber: 0, samples : [], len : 0};\n    this.remuxer.switchLevel();\n  }\n\n  insertDiscontinuity() {\n    this.switchLevel();\n    this.remuxer.insertDiscontinuity();\n  }\n\n  // feed incoming data to the front of the parsing pipeline\n  push(data, audioCodec, videoCodec, timeOffset, cc, level, duration) {\n    var avcData, aacData, id3Data,\n        start, len = data.length, stt, pid, atf, offset;\n    this.audioCodec = audioCodec;\n    this.videoCodec = videoCodec;\n    this.timeOffset = timeOffset;\n    this._duration = duration;\n    if (cc !== this.lastCC) {\n      logger.log('discontinuity detected');\n      this.insertDiscontinuity();\n      this.lastCC = cc;\n    } else if (level !== this.lastLevel) {\n      logger.log('level switch detected');\n      this.switchLevel();\n      this.lastLevel = level;\n    }\n    var pmtParsed = this.pmtParsed,\n        avcId = this._avcTrack.id,\n        aacId = this._aacTrack.id,\n        id3Id = this._id3Track.id;\n    // loop through TS packets\n    for (start = 0; start < len; start += 188) {\n      if (data[start] === 0x47) {\n        stt = !!(data[start + 1] & 0x40);\n        // pid is a 13-bit field starting at the last bit of TS[1]\n        pid = ((data[start + 1] & 0x1f) << 8) + data[start + 2];\n        atf = (data[start + 3] & 0x30) >> 4;\n        // if an adaption field is present, its length is specified by the fifth byte of the TS packet header.\n        if (atf > 1) {\n          offset = start + 5 + data[start + 4];\n          // continue if there is only adaptation field\n          if (offset === (start + 188)) {\n            continue;\n          }\n        } else {\n          offset = start + 4;\n        }\n        if (pmtParsed) {\n          if (pid === avcId) {\n            if (stt) {\n              if (avcData) {\n                this._parseAVCPES(this._parsePES(avcData));\n              }\n              avcData = {data: [], size: 0};\n            }\n            if (avcData) {\n              avcData.data.push(data.subarray(offset, start + 188));\n              avcData.size += start + 188 - offset;\n            }\n          } else if (pid === aacId) {\n            if (stt) {\n              if (aacData) {\n                this._parseAACPES(this._parsePES(aacData));\n              }\n              aacData = {data: [], size: 0};\n            }\n            if (aacData) {\n              aacData.data.push(data.subarray(offset, start + 188));\n              aacData.size += start + 188 - offset;\n            }\n          } else if (pid === id3Id) {\n            if (stt) {\n              if (id3Data) {\n                this._parseID3PES(this._parsePES(id3Data));\n              }\n              id3Data = {data: [], size: 0};\n            }\n            if (id3Data) {\n              id3Data.data.push(data.subarray(offset, start + 188));\n              id3Data.size += start + 188 - offset;\n            }\n          }\n        } else {\n          if (stt) {\n            offset += data[offset] + 1;\n          }\n          if (pid === 0) {\n            this._parsePAT(data, offset);\n          } else if (pid === this._pmtId) {\n            this._parsePMT(data, offset);\n            pmtParsed = this.pmtParsed = true;\n            avcId = this._avcTrack.id;\n            aacId = this._aacTrack.id;\n            id3Id = this._id3Track.id;\n          }\n        }\n      } else {\n        this.observer.trigger(Event.ERROR, {type : ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_PARSING_ERROR, fatal: false, reason: 'TS packet did not start with 0x47'});\n      }\n    }\n    // parse last PES packet\n    if (avcData) {\n      this._parseAVCPES(this._parsePES(avcData));\n    }\n    if (aacData) {\n      this._parseAACPES(this._parsePES(aacData));\n    }\n    if (id3Data) {\n      this._parseID3PES(this._parsePES(id3Data));\n    }\n  }\n\n  remux() {\n    this.remuxer.remux(this._aacTrack,this._avcTrack, this._id3Track, this.timeOffset);\n  }\n\n  destroy() {\n    this.switchLevel();\n    this._initPTS = this._initDTS = undefined;\n    this._duration = 0;\n  }\n\n  _parsePAT(data, offset) {\n    // skip the PSI header and parse the first PMT entry\n    this._pmtId  = (data[offset + 10] & 0x1F) << 8 | data[offset + 11];\n    //logger.log('PMT PID:'  + this._pmtId);\n  }\n\n  _parsePMT(data, offset) {\n    var sectionLength, tableEnd, programInfoLength, pid;\n    sectionLength = (data[offset + 1] & 0x0f) << 8 | data[offset + 2];\n    tableEnd = offset + 3 + sectionLength - 4;\n    // to determine where the table is, we have to figure out how\n    // long the program info descriptors are\n    programInfoLength = (data[offset + 10] & 0x0f) << 8 | data[offset + 11];\n    // advance the offset to the first entry in the mapping table\n    offset += 12 + programInfoLength;\n    while (offset < tableEnd) {\n      pid = (data[offset + 1] & 0x1F) << 8 | data[offset + 2];\n      switch(data[offset]) {\n        // ISO/IEC 13818-7 ADTS AAC (MPEG-2 lower bit-rate audio)\n        case 0x0f:\n          //logger.log('AAC PID:'  + pid);\n          this._aacTrack.id = pid;\n          break;\n        // Packetized metadata (ID3)\n        case 0x15:\n          //logger.log('ID3 PID:'  + pid);\n          this._id3Track.id = pid;\n          break;\n        // ITU-T Rec. H.264 and ISO/IEC 14496-10 (lower bit-rate video)\n        case 0x1b:\n          //logger.log('AVC PID:'  + pid);\n          this._avcTrack.id = pid;\n          break;\n        default:\n        logger.log('unkown stream type:'  + data[offset]);\n        break;\n      }\n      // move to the next table entry\n      // skip past the elementary stream descriptors, if present\n      offset += ((data[offset + 3] & 0x0F) << 8 | data[offset + 4]) + 5;\n    }\n  }\n\n  _parsePES(stream) {\n    var i = 0, frag, pesFlags, pesPrefix, pesLen, pesHdrLen, pesData, pesPts, pesDts, payloadStartOffset;\n    //retrieve PTS/DTS from first fragment\n    frag = stream.data[0];\n    pesPrefix = (frag[0] << 16) + (frag[1] << 8) + frag[2];\n    if (pesPrefix === 1) {\n      pesLen = (frag[4] << 8) + frag[5];\n      pesFlags = frag[7];\n      if (pesFlags & 0xC0) {\n        /* PES header described here : http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n            as PTS / DTS is 33 bit we cannot use bitwise operator in JS,\n            as Bitwise operators treat their operands as a sequence of 32 bits */\n        pesPts = (frag[9] & 0x0E) * 536870912 +// 1 << 29\n          (frag[10] & 0xFF) * 4194304 +// 1 << 22\n          (frag[11] & 0xFE) * 16384 +// 1 << 14\n          (frag[12] & 0xFF) * 128 +// 1 << 7\n          (frag[13] & 0xFE) / 2;\n          // check if greater than 2^32 -1\n          if (pesPts > 4294967295) {\n            // decrement 2^33\n            pesPts -= 8589934592;\n          }\n        if (pesFlags & 0x40) {\n          pesDts = (frag[14] & 0x0E ) * 536870912 +// 1 << 29\n            (frag[15] & 0xFF ) * 4194304 +// 1 << 22\n            (frag[16] & 0xFE ) * 16384 +// 1 << 14\n            (frag[17] & 0xFF ) * 128 +// 1 << 7\n            (frag[18] & 0xFE ) / 2;\n          // check if greater than 2^32 -1\n          if (pesDts > 4294967295) {\n            // decrement 2^33\n            pesDts -= 8589934592;\n          }\n        } else {\n          pesDts = pesPts;\n        }\n      }\n      pesHdrLen = frag[8];\n      payloadStartOffset = pesHdrLen + 9;\n      // trim PES header\n      stream.data[0] = stream.data[0].subarray(payloadStartOffset);\n      stream.size -= payloadStartOffset;\n      //reassemble PES packet\n      pesData = new Uint8Array(stream.size);\n      // reassemble the packet\n      while (stream.data.length) {\n        frag = stream.data.shift();\n        pesData.set(frag, i);\n        i += frag.byteLength;\n      }\n      return {data: pesData, pts: pesPts, dts: pesDts, len: pesLen};\n    } else {\n      return null;\n    }\n  }\n\n  _parseAVCPES(pes) {\n    var units,track = this._avcTrack, avcSample, key = false;\n    units = this._parseAVCNALu(pes.data);\n    // no NALu found\n    if (units.length === 0 & this._avcTrack.samples.length > 0) {\n      // append pes.data to previous NAL unit\n      var lastavcSample = this._avcTrack.samples[this._avcTrack.samples.length - 1];\n      var lastUnit = lastavcSample.units.units[lastavcSample.units.units.length - 1];\n      var tmp = new Uint8Array(lastUnit.data.byteLength + pes.data.byteLength);\n      tmp.set(lastUnit.data, 0);\n      tmp.set(pes.data, lastUnit.data.byteLength);\n      lastUnit.data = tmp;\n      lastavcSample.units.length += pes.data.byteLength;\n      this._avcTrack.len += pes.data.byteLength;\n    }\n    //free pes.data to save up some memory\n    pes.data = null;\n    //var debugString = '';\n    units.units.forEach(unit => {\n      switch(unit.type) {\n        //NDR\n        // case 1:\n        //   debugString += 'NDR ';\n        //   break;\n        //IDR\n        case 5:\n          //debugString += 'IDR ';\n          key = true;\n          break;\n        //case 6:\n        //  debugString += 'SEI ';\n        //  break;\n        //SPS\n        case 7:\n          //debugString += 'SPS ';\n          if(!track.sps) {\n            var expGolombDecoder = new ExpGolomb(unit.data);\n            var config = expGolombDecoder.readSPS();\n            track.width = config.width;\n            track.height = config.height;\n            track.profileIdc = config.profileIdc;\n            track.profileCompat = config.profileCompat;\n            track.levelIdc = config.levelIdc;\n            track.sps = [unit.data];\n            track.timescale = this.remuxer.timescale;\n            track.duration = this.remuxer.timescale * this._duration;\n            var codecarray = unit.data.subarray(1, 4);\n            var codecstring = 'avc1.';\n            for (var i = 0; i < 3; i++) {\n              var h = codecarray[i].toString(16);\n              if (h.length < 2) {\n                h = '0' + h;\n              }\n              codecstring += h;\n            }\n            track.codec = codecstring;\n          }\n          break;\n        //PPS\n        case 8:\n          //debugString += 'PPS ';\n          if (!track.pps) {\n            track.pps = [unit.data];\n          }\n          break;\n        //case 9:\n        //  debugString += 'AUD ';\n        default:\n          break;\n      }\n    });\n    //logger.log(debugString);\n    //build sample from PES\n    // Annex B to MP4 conversion to be done\n    if (units.length) {\n      // only push AVC sample if keyframe already found. browsers expect a keyframe at first to start decoding\n      if (key === true || track.sps ) {\n        avcSample = {units: units, pts: pes.pts, dts: pes.dts, key: key};\n        this._avcTrack.samples.push(avcSample);\n        this._avcTrack.len += units.length;\n        this._avcTrack.nbNalu += units.units.length;\n      }\n    }\n  }\n\n\n  _parseAVCNALu(array) {\n    var i = 0, len = array.byteLength, value, overflow, state = 0;\n    var units = [], unit, unitType, lastUnitStart, lastUnitType, length = 0;\n    //logger.log('PES:' + Hex.hexDump(array));\n    while (i < len) {\n      value = array[i++];\n      // finding 3 or 4-byte start codes (00 00 01 OR 00 00 00 01)\n      switch (state) {\n        case 0:\n          if (value === 0) {\n            state = 1;\n          }\n          break;\n        case 1:\n          if( value === 0) {\n            state = 2;\n          } else {\n            state = 0;\n          }\n          break;\n        case 2:\n        case 3:\n          if( value === 0) {\n            state = 3;\n          } else if (value === 1) {\n            unitType = array[i] & 0x1f;\n            //logger.log('find NALU @ offset:' + i + ',type:' + unitType);\n            if (lastUnitStart) {\n              unit = {data: array.subarray(lastUnitStart, i - state - 1), type: lastUnitType};\n              length += i - state - 1 - lastUnitStart;\n              //logger.log('pushing NALU, type/size:' + unit.type + '/' + unit.data.byteLength);\n              units.push(unit);\n            } else {\n              // If NAL units are not starting right at the beginning of the PES packet, push preceding data into previous NAL unit.\n              overflow  = i - state - 1;\n              if (overflow) {\n                //logger.log('first NALU found with overflow:' + overflow);\n                if (this._avcTrack.samples.length) {\n                  var lastavcSample = this._avcTrack.samples[this._avcTrack.samples.length - 1];\n                  var lastUnit = lastavcSample.units.units[lastavcSample.units.units.length - 1];\n                  var tmp = new Uint8Array(lastUnit.data.byteLength + overflow);\n                  tmp.set(lastUnit.data, 0);\n                  tmp.set(array.subarray(0, overflow), lastUnit.data.byteLength);\n                  lastUnit.data = tmp;\n                  lastavcSample.units.length += overflow;\n                  this._avcTrack.len += overflow;\n                }\n              }\n            }\n            lastUnitStart = i;\n            lastUnitType = unitType;\n            if (unitType === 1 || unitType === 5) {\n              // OPTI !!! if IDR/NDR unit, consider it is last NALu\n              i = len;\n            }\n            state = 0;\n          } else {\n            state = 0;\n          }\n          break;\n        default:\n          break;\n      }\n    }\n    if (lastUnitStart) {\n      unit = {data: array.subarray(lastUnitStart, len), type: lastUnitType};\n      length += len - lastUnitStart;\n      units.push(unit);\n      //logger.log('pushing NALU, type/size:' + unit.type + '/' + unit.data.byteLength);\n    }\n    return {units: units , length: length};\n  }\n\n  _parseAACPES(pes) {\n    var track = this._aacTrack, aacSample, data = pes.data, config, adtsFrameSize, adtsStartOffset, adtsHeaderLen, stamp, nbSamples, len;\n    if (this.aacOverFlow) {\n      var tmp = new Uint8Array(this.aacOverFlow.byteLength + data.byteLength);\n      tmp.set(this.aacOverFlow, 0);\n      tmp.set(data, this.aacOverFlow.byteLength);\n      data = tmp;\n    }\n    // look for ADTS header (0xFFFx)\n    for (adtsStartOffset = 0, len = data.length; adtsStartOffset < len - 1; adtsStartOffset++) {\n      if ((data[adtsStartOffset] === 0xff) && (data[adtsStartOffset+1] & 0xf0) === 0xf0) {\n        break;\n      }\n    }\n    // if ADTS header does not start straight from the beginning of the PES payload, raise an error\n    if (adtsStartOffset) {\n      var reason, fatal;\n      if (adtsStartOffset < len - 1) {\n        reason = `AAC PES did not start with ADTS header,offset:${adtsStartOffset}`;\n        fatal = false;\n      } else {\n        reason = 'no ADTS header found in AAC PES';\n        fatal = true;\n      }\n      this.observer.trigger(Event.ERROR, {type: ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_PARSING_ERROR, fatal: fatal, reason: reason});\n      if (fatal) {\n        return;\n      }\n    }\n    if (!track.audiosamplerate) {\n      config = this._ADTStoAudioConfig(data, adtsStartOffset, this.audioCodec);\n      track.config = config.config;\n      track.audiosamplerate = config.samplerate;\n      track.channelCount = config.channelCount;\n      track.codec = config.codec;\n      track.timescale = this.remuxer.timescale;\n      track.duration = this.remuxer.timescale * this._duration;\n      logger.log(`parsed codec:${track.codec},rate:${config.samplerate},nb channel:${config.channelCount}`);\n    }\n    nbSamples = 0;\n    while ((adtsStartOffset + 5) < len) {\n      // retrieve frame size\n      adtsFrameSize = ((data[adtsStartOffset + 3] & 0x03) << 11);\n      // byte 4\n      adtsFrameSize |= (data[adtsStartOffset + 4] << 3);\n      // byte 5\n      adtsFrameSize |= ((data[adtsStartOffset + 5] & 0xE0) >>> 5);\n      adtsHeaderLen = (!!(data[adtsStartOffset + 1] & 0x01) ? 7 : 9);\n      adtsFrameSize -= adtsHeaderLen;\n      stamp = Math.round(pes.pts + nbSamples * 1024 * this.PES_TIMESCALE / track.audiosamplerate);\n      //stamp = pes.pts;\n      //console.log('AAC frame, offset/length/pts:' + (adtsStartOffset+7) + '/' + adtsFrameSize + '/' + stamp.toFixed(0));\n      if (adtsStartOffset + adtsHeaderLen + adtsFrameSize <= len) {\n        aacSample = {unit: data.subarray(adtsStartOffset + adtsHeaderLen, adtsStartOffset + adtsHeaderLen + adtsFrameSize), pts: stamp, dts: stamp};\n        this._aacTrack.samples.push(aacSample);\n        this._aacTrack.len += adtsFrameSize;\n        adtsStartOffset += adtsFrameSize + adtsHeaderLen;\n        nbSamples++;\n      } else {\n        break;\n      }\n    }\n    if (adtsStartOffset < len) {\n      this.aacOverFlow = data.subarray(adtsStartOffset, len);\n    } else {\n      this.aacOverFlow = null;\n    }\n  }\n\n  _ADTStoAudioConfig(data, offset, audioCodec) {\n    var adtsObjectType, // :int\n        adtsSampleingIndex, // :int\n        adtsExtensionSampleingIndex, // :int\n        adtsChanelConfig, // :int\n        config,\n        userAgent = navigator.userAgent.toLowerCase(),\n        adtsSampleingRates = [\n            96000, 88200,\n            64000, 48000,\n            44100, 32000,\n            24000, 22050,\n            16000, 12000,\n            11025, 8000,\n            7350];\n    // byte 2\n    adtsObjectType = ((data[offset + 2] & 0xC0) >>> 6) + 1;\n    adtsSampleingIndex = ((data[offset + 2] & 0x3C) >>> 2);\n    if(adtsSampleingIndex > adtsSampleingRates.length-1) {\n      this.observer.trigger(Event.ERROR, {type: ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_PARSING_ERROR, fatal: true, reason: `invalid ADTS sampling index:${adtsSampleingIndex}`});\n      return;\n    }\n    adtsChanelConfig = ((data[offset + 2] & 0x01) << 2);\n    // byte 3\n    adtsChanelConfig |= ((data[offset + 3] & 0xC0) >>> 6);\n    logger.log(`manifest codec:${audioCodec},ADTS data:type:${adtsObjectType},sampleingIndex:${adtsSampleingIndex}[${adtsSampleingRates[adtsSampleingIndex]}kHz],channelConfig:${adtsChanelConfig}`);\n    // firefox: freq less than 24kHz = AAC SBR (HE-AAC)\n    if (userAgent.indexOf('firefox') !== -1) {\n      if (adtsSampleingIndex >= 6) {\n        adtsObjectType = 5;\n        config = new Array(4);\n        // HE-AAC uses SBR (Spectral Band Replication) , high frequencies are constructed from low frequencies\n        // there is a factor 2 between frame sample rate and output sample rate\n        // multiply frequency by 2 (see table below, equivalent to substract 3)\n        adtsExtensionSampleingIndex = adtsSampleingIndex - 3;\n      } else {\n        adtsObjectType = 2;\n        config = new Array(2);\n        adtsExtensionSampleingIndex = adtsSampleingIndex;\n      }\n      // Android : always use AAC\n    } else if (userAgent.indexOf('android') !== -1) {\n      adtsObjectType = 2;\n      config = new Array(2);\n      adtsExtensionSampleingIndex = adtsSampleingIndex;\n    } else {\n      /*  for other browsers (chrome ...)\n          always force audio type to be HE-AAC SBR, as some browsers do not support audio codec switch properly (like Chrome ...)\n      */\n      adtsObjectType = 5;\n      config = new Array(4);\n      // if (manifest codec is HE-AAC) OR (manifest codec not specified AND frequency less than 24kHz)\n      if ((audioCodec && audioCodec.indexOf('mp4a.40.5') !== -1) || (!audioCodec && adtsSampleingIndex >= 6)) {\n        // HE-AAC uses SBR (Spectral Band Replication) , high frequencies are constructed from low frequencies\n        // there is a factor 2 between frame sample rate and output sample rate\n        // multiply frequency by 2 (see table below, equivalent to substract 3)\n        adtsExtensionSampleingIndex = adtsSampleingIndex - 3;\n      } else {\n        // if (manifest codec is AAC) AND (frequency less than 24kHz OR nb channel is 1)\n        if (audioCodec && audioCodec.indexOf('mp4a.40.2') !== -1 && (adtsSampleingIndex >= 6 || adtsChanelConfig === 1)) {\n          adtsObjectType = 2;\n          config = new Array(2);\n        }\n        adtsExtensionSampleingIndex = adtsSampleingIndex;\n      }\n    }\n    /* refer to http://wiki.multimedia.cx/index.php?title=MPEG-4_Audio#Audio_Specific_Config\n        ISO 14496-3 (AAC).pdf - Table 1.13  Syntax of AudioSpecificConfig()\n      Audio Profile / Audio Object Type\n      0: Null\n      1: AAC Main\n      2: AAC LC (Low Complexity)\n      3: AAC SSR (Scalable Sample Rate)\n      4: AAC LTP (Long Term Prediction)\n      5: SBR (Spectral Band Replication)\n      6: AAC Scalable\n     sampling freq\n      0: 96000 Hz\n      1: 88200 Hz\n      2: 64000 Hz\n      3: 48000 Hz\n      4: 44100 Hz\n      5: 32000 Hz\n      6: 24000 Hz\n      7: 22050 Hz\n      8: 16000 Hz\n      9: 12000 Hz\n      10: 11025 Hz\n      11: 8000 Hz\n      12: 7350 Hz\n      13: Reserved\n      14: Reserved\n      15: frequency is written explictly\n      Channel Configurations\n      These are the channel configurations:\n      0: Defined in AOT Specifc Config\n      1: 1 channel: front-center\n      2: 2 channels: front-left, front-right\n    */\n    // audioObjectType = profile => profile, the MPEG-4 Audio Object Type minus 1\n    config[0] = adtsObjectType << 3;\n    // samplingFrequencyIndex\n    config[0] |= (adtsSampleingIndex & 0x0E) >> 1;\n    config[1] |= (adtsSampleingIndex & 0x01) << 7;\n    // channelConfiguration\n    config[1] |= adtsChanelConfig << 3;\n    if (adtsObjectType === 5) {\n      // adtsExtensionSampleingIndex\n      config[1] |= (adtsExtensionSampleingIndex & 0x0E) >> 1;\n      config[2] = (adtsExtensionSampleingIndex & 0x01) << 7;\n      // adtsObjectType (force to 2, chrome is checking that object type is less than 5 ???\n      //    https://chromium.googlesource.com/chromium/src.git/+/master/media/formats/mp4/aac.cc\n      config[2] |= 2 << 2;\n      config[3] = 0;\n    }\n    return {config: config, samplerate: adtsSampleingRates[adtsSampleingIndex], channelCount: adtsChanelConfig, codec: ('mp4a.40.' + adtsObjectType)};\n  }\n\n  _parseID3PES(pes) {\n    this._id3Track.samples.push(pes);\n  }\n}\n\nexport default TSDemuxer;\n\n",
    "export const ErrorTypes = {\n  // Identifier for a network error (loading error / timeout ...)\n  NETWORK_ERROR: 'hlsNetworkError',\n  // Identifier for a media Error (video/parsing/mediasource error)\n  MEDIA_ERROR: 'hlsMediaError',\n  // Identifier for all other errors\n  OTHER_ERROR: 'hlsOtherError'\n};\n\nexport const ErrorDetails = {\n  // Identifier for a manifest load error - data: { url : faulty URL, response : XHR response}\n  MANIFEST_LOAD_ERROR: 'manifestLoadError',\n  // Identifier for a manifest load timeout - data: { url : faulty URL, response : XHR response}\n  MANIFEST_LOAD_TIMEOUT: 'manifestLoadTimeOut',\n  // Identifier for a manifest parsing error - data: { url : faulty URL, reason : error reason}\n  MANIFEST_PARSING_ERROR: 'manifestParsingError',\n  // Identifier for playlist load error - data: { url : faulty URL, response : XHR response}\n  LEVEL_LOAD_ERROR: 'levelLoadError',\n  // Identifier for playlist load timeout - data: { url : faulty URL, response : XHR response}\n  LEVEL_LOAD_TIMEOUT: 'levelLoadTimeOut',\n  // Identifier for a level switch error - data: { level : faulty level Id, event : error description}\n  LEVEL_SWITCH_ERROR: 'levelSwitchError',\n  // Identifier for fragment load error - data: { frag : fragment object, response : XHR response}\n  FRAG_LOAD_ERROR: 'fragLoadError',\n  // Identifier for fragment loop loading error - data: { frag : fragment object}\n  FRAG_LOOP_LOADING_ERROR: 'fragLoopLoadingError',\n  // Identifier for fragment load timeout error - data: { frag : fragment object}\n  FRAG_LOAD_TIMEOUT: 'fragLoadTimeOut',\n  // Identifier for a fragment parsing error event - data: parsing error description\n  FRAG_PARSING_ERROR: 'fragParsingError',\n    // Identifier for a fragment appending error event - data: appending error description\n  FRAG_APPENDING_ERROR: 'fragAppendingError'\n};\n",
    "export default {\n  // fired when MediaSource has been succesfully attached to video element - data: { video, mediaSource }\n  MSE_ATTACHED: 'hlsMediaSourceAttached',\n  // fired before detaching MediaSource from video element - data: { }\n  MSE_DETACHING: 'hlsMediaSourceDetaching',\n  // fired when MediaSource has been detached from video element - data: { }\n  MSE_DETACHED: 'hlsMediaSourceDetached',\n  // fired to signal that a manifest loading starts - data: { url : manifestURL}\n  MANIFEST_LOADING: 'hlsManifestLoading',\n  // fired after manifest has been loaded - data: { levels : [available quality levels] , url : manifestURL, stats : { trequest, tfirst, tload, mtime}}\n  MANIFEST_LOADED: 'hlsManifestLoaded',\n  // fired after manifest has been parsed - data: { levels : [available quality levels] , firstLevel : index of first quality level appearing in Manifest}\n  MANIFEST_PARSED: 'hlsManifestParsed',\n  // fired when a level playlist loading starts - data: { url : level URL  level : id of level being loaded}\n  LEVEL_LOADING: 'hlsLevelLoading',\n  // fired when a level playlist loading finishes - data: { details : levelDetails object, level : id of loaded level, stats : { trequest, tfirst, tload, mtime} }\n  LEVEL_LOADED: 'hlsLevelLoaded',\n  // fired when a level's details have been updated based on previous details, after it has been loaded. - data: { details : levelDetails object, level : id of updated level }\n  LEVEL_UPDATED: 'hlsLevelUpdated',\n  // fired when a level's PTS information has been updated after parsing a fragment - data: { details : levelDetails object, level : id of updated level, drift: PTS drift observed when parsing last fragment } \n  LEVEL_PTS_UPDATED: 'hlsPTSUpdated',\n  // fired when a level switch is requested - data: { level : id of new level }\n  LEVEL_SWITCH: 'hlsLevelSwitch',\n  // fired when a fragment loading starts - data: { frag : fragment object}\n  FRAG_LOADING: 'hlsFragLoading',\n  // fired when a fragment loading is progressing - data: { frag : fragment object, { trequest, tfirst, loaded}}\n  FRAG_LOAD_PROGRESS: 'hlsFragLoadProgress',\n  // Identifier for fragment load aborting for emergency switch down - data: {frag : fragment object}\n  FRAG_LOAD_EMERGENCY_ABORTED: 'hlsFragLoadEmergencyAborted',\n  // fired when a fragment loading is completed - data: { frag : fragment object, payload : fragment payload, stats : { trequest, tfirst, tload, length}}\n  FRAG_LOADED: 'hlsFragLoaded',\n  // fired when Init Segment has been extracted from fragment - data: { moov : moov MP4 box, codecs : codecs found while parsing fragment}\n  FRAG_PARSING_INIT_SEGMENT: 'hlsFragParsingInitSegment',\n  // fired when parsing id3 is completed - data: { samples : [ id3 samples pes ] }\n  FRAG_PARSING_METADATA: 'hlsFraParsingMetadata',\n  // fired when moof/mdat have been extracted from fragment - data: { moof : moof MP4 box, mdat : mdat MP4 box}\n  FRAG_PARSING_DATA: 'hlsFragParsingData',\n  // fired when fragment parsing is completed - data: undefined\n  FRAG_PARSED: 'hlsFragParsed',\n  // fired when fragment remuxed MP4 boxes have all been appended into SourceBuffer - data: { frag : fragment object, stats : { trequest, tfirst, tload, tparsed, tbuffered, length} }\n  FRAG_BUFFERED: 'hlsFragBuffered',\n  // fired when fragment matching with current video position is changing - data : { frag : fragment object }\n  FRAG_CHANGED: 'hlsFragChanged',\n    // Identifier for a FPS drop event - data: {curentDropped, currentDecoded, totalDroppedFrames}\n  FPS_DROP: 'hlsFPSDrop',\n  // Identifier for an error event - data: { type : error type, details : error details, fatal : if true, hls.js cannot/will not try to recover, if false, hls.js will try to recover,other error specific data}\n  ERROR: 'hlsError',\n  // fired when hls.js instance starts destroying. Different from MSE_DETACHED as one could want to detach and reattach a video to the instance of hls.js to handle mid-rolls for example\n  DESTROYING: 'hlsDestroying',\n};\n",
    "/**\n * Level Helper class, providing methods dealing with playlist sliding and drift\n*/\n\nimport {logger} from '../utils/logger';\n\nclass LevelHelper {\n\n  static mergeDetails(oldDetails,newDetails) {\n    var start = Math.max(oldDetails.startSN,newDetails.startSN)-newDetails.startSN,\n        end = Math.min(oldDetails.endSN,newDetails.endSN)-newDetails.startSN,\n        delta = newDetails.startSN - oldDetails.startSN,\n        oldfragments = oldDetails.fragments,\n        newfragments = newDetails.fragments,\n        ccOffset =0,\n        PTSFrag;\n\n    // check if old/new playlists have fragments in common\n    if ( end < start) {\n      newDetails.PTSKnown = false;\n      return;\n    }\n    // loop through overlapping SN and update startPTS , cc, and duration if any found\n    for(var i = start ; i <= end ; i++) {\n      var oldFrag = oldfragments[delta+i],\n          newFrag = newfragments[i];\n      ccOffset = oldFrag.cc - newFrag.cc;\n      if (!isNaN(oldFrag.startPTS)) {\n        newFrag.start = newFrag.startPTS = oldFrag.startPTS;\n        newFrag.endPTS = oldFrag.endPTS;\n        newFrag.duration = oldFrag.duration;\n        PTSFrag = newFrag;\n      }\n    }\n\n    if(ccOffset) {\n      logger.log(`discontinuity sliding from playlist, take drift into account`);\n      for(i = 0 ; i < newfragments.length ; i++) {\n        newfragments[i].cc += ccOffset;\n      }\n    }\n\n    // if at least one fragment contains PTS info, recompute PTS information for all fragments\n    if(PTSFrag) {\n      LevelHelper.updateFragPTS(newDetails,PTSFrag.sn,PTSFrag.startPTS,PTSFrag.endPTS);\n    } else {\n      // adjust start by sliding offset\n      var sliding = oldfragments[delta].start;\n      for(i = 0 ; i < newfragments.length ; i++) {\n        newfragments[i].start += sliding;\n      }\n    }\n    // if we are here, it means we have fragments overlapping between\n    // old and new level. reliable PTS info is thus relying on old level\n    newDetails.PTSKnown = oldDetails.PTSKnown;\n    return;\n  }\n\n  static updateFragPTS(details,sn,startPTS,endPTS) {\n    var fragIdx, fragments, frag, i;\n    // exit if sn out of range\n    if (sn < details.startSN || sn > details.endSN) {\n      return 0;\n    }\n    fragIdx = sn - details.startSN;\n    fragments = details.fragments;\n    frag = fragments[fragIdx];\n    if(!isNaN(frag.startPTS)) {\n      startPTS = Math.max(startPTS,frag.startPTS);\n      endPTS = Math.min(endPTS, frag.endPTS);\n    }\n      \n    var drift = startPTS - frag.start;\n      \n    frag.start = frag.startPTS = startPTS;\n    frag.endPTS = endPTS;\n    frag.duration = endPTS - startPTS;\n    // adjust fragment PTS/duration from seqnum-1 to frag 0\n    for(i = fragIdx ; i > 0 ; i--) {\n      LevelHelper.updatePTS(fragments,i,i-1);\n    }\n\n    // adjust fragment PTS/duration from seqnum to last frag\n    for(i = fragIdx ; i < fragments.length - 1 ; i++) {\n      LevelHelper.updatePTS(fragments,i,i+1);\n    }\n    details.PTSKnown = true;\n    //logger.log(`                                            frag start/end:${startPTS.toFixed(3)}/${endPTS.toFixed(3)}`);\n      \n    return drift;\n  }\n\n  static updatePTS(fragments,fromIdx, toIdx) {\n    var fragFrom = fragments[fromIdx],fragTo = fragments[toIdx], fragToPTS = fragTo.startPTS;\n    // if we know startPTS[toIdx]\n    if(!isNaN(fragToPTS)) {\n      // update fragment duration.\n      // it helps to fix drifts between playlist reported duration and fragment real duration\n      if (toIdx > fromIdx) {\n        fragFrom.duration = fragToPTS-fragFrom.start;\n        if(fragFrom.duration < 0) {\n          logger.error(`negative duration computed for ${fragFrom}, there should be some duration drift between playlist and fragment!`);\n        }\n      } else {\n        fragTo.duration = fragFrom.start - fragToPTS;\n        if(fragTo.duration < 0) {\n          logger.error(`negative duration computed for ${fragTo}, there should be some duration drift between playlist and fragment!`);\n        }\n      }\n    } else {\n      // we dont know startPTS[toIdx]\n      if (toIdx > fromIdx) {\n        fragTo.start = fragFrom.start + fragFrom.duration;\n      } else {\n        fragTo.start = fragFrom.start - fragTo.duration;\n      }\n    }\n  }\n}\n\nexport default LevelHelper;\n",
    "/**\n * HLS interface\n */\n'use strict';\n\nimport Event from './events';\nimport {ErrorTypes, ErrorDetails} from './errors';\nimport PlaylistLoader from './loader/playlist-loader';\nimport FragmentLoader from './loader/fragment-loader';\nimport AbrController from    './controller/abr-controller';\nimport BufferController from './controller/buffer-controller';\nimport LevelController from  './controller/level-controller';\n//import FPSController from './controller/fps-controller';\nimport {logger, enableLogs} from './utils/logger';\nimport XhrLoader from './utils/xhr-loader';\nimport EventEmitter from 'events';\n\nclass Hls {\n\n  static isSupported() {\n    return (window.MediaSource && window.MediaSource.isTypeSupported('video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"'));\n  }\n\n  static get Events() {\n    return Event;\n  }\n\n  static get ErrorTypes() {\n    return ErrorTypes;\n  }\n\n  static get ErrorDetails() {\n    return ErrorDetails;\n  }\n\n  constructor(config = {}) {\n   var configDefault = {\n      autoStartLoad: true,\n      debug: false,\n      maxBufferLength: 30,\n      maxBufferSize: 60 * 1000 * 1000,\n      liveSyncDurationCount:3,\n      liveMaxLatencyDurationCount: Infinity,\n      maxMaxBufferLength: 600,\n      enableWorker: true,\n      fragLoadingTimeOut: 20000,\n      fragLoadingMaxRetry: 1,\n      fragLoadingRetryDelay: 1000,\n      fragLoadingLoopThreshold: 3,\n      manifestLoadingTimeOut: 10000,\n      manifestLoadingMaxRetry: 1,\n      manifestLoadingRetryDelay: 1000,\n      fpsDroppedMonitoringPeriod: 5000,\n      fpsDroppedMonitoringThreshold: 0.2,\n      appendErrorMaxRetry: 200,\n      loader: XhrLoader,\n      abrController : AbrController\n    };\n    for (var prop in configDefault) {\n        if (prop in config) { continue; }\n        config[prop] = configDefault[prop];\n    }\n\n    if (config.liveMaxLatencyDurationCount !== undefined && config.liveMaxLatencyDurationCount <= config.liveSyncDurationCount) {\n      throw new Error('Illegal hls.js configuration: \"liveMaxLatencyDurationCount\" must be strictly superior to \"liveSyncDurationCount\" in player configuration');\n    }\n\n    enableLogs(config.debug);\n    this.config = config;\n    // observer setup\n    var observer = this.observer = new EventEmitter();\n    observer.trigger = function trigger (event, ...data) {\n      observer.emit(event, event, ...data);\n    };\n\n    observer.off = function off (event, ...data) {\n      observer.removeListener(event, ...data);\n    };\n    this.on = observer.on.bind(observer);\n    this.off = observer.off.bind(observer);\n    this.trigger = observer.trigger.bind(observer);\n    this.playlistLoader = new PlaylistLoader(this);\n    this.fragmentLoader = new FragmentLoader(this);\n    this.levelController = new LevelController(this);\n    this.abrController = new config.abrController(this);\n    this.bufferController = new BufferController(this);\n    //this.fpsController = new FPSController(this);\n  }\n\n  destroy() {\n    logger.log('destroy');\n    this.trigger(Event.DESTROYING);\n    this.playlistLoader.destroy();\n    this.fragmentLoader.destroy();\n    this.levelController.destroy();\n    this.bufferController.destroy();\n    //this.fpsController.destroy();\n    this.url = null;\n    this.detachVideo();\n    this.observer.removeAllListeners();\n  }\n\n  attachVideo(video) {\n    logger.log('attachVideo');\n    this.video = video;\n    // setup the media source\n    var ms = this.mediaSource = new MediaSource();\n    //Media Source listeners\n    this.onmso = this.onMediaSourceOpen.bind(this);\n    this.onmse = this.onMediaSourceEnded.bind(this);\n    this.onmsc = this.onMediaSourceClose.bind(this);\n    ms.addEventListener('sourceopen', this.onmso);\n    ms.addEventListener('sourceended', this.onmse);\n    ms.addEventListener('sourceclose', this.onmsc);\n    // link video and media Source\n    video.src = URL.createObjectURL(ms);\n  }\n\n  detachVideo() {\n    logger.log('detachVideo');\n    var video = this.video;\n    logger.log('trigger MSE_DETACHING');\n    this.trigger(Event.MSE_DETACHING);\n    var ms = this.mediaSource;\n    if (ms) {\n      if (ms.readyState === 'open') {\n        ms.endOfStream();\n      }\n      ms.removeEventListener('sourceopen', this.onmso);\n      ms.removeEventListener('sourceended', this.onmse);\n      ms.removeEventListener('sourceclose', this.onmsc);\n      // unlink MediaSource from video tag\n      video.src = '';\n      this.mediaSource = null;\n      logger.log('trigger MSE_DETACHED');\n      this.trigger(Event.MSE_DETACHED);\n    }\n    this.onmso = this.onmse = this.onmsc = null;\n    if (video) {\n      this.video = null;\n    }\n  }\n\n  loadSource(url) {\n    logger.log(`loadSource:${url}`);\n    this.url = url;\n    // when attaching to a source URL, trigger a playlist load\n    this.trigger(Event.MANIFEST_LOADING, {url: url});\n  }\n\n  startLoad() {\n    logger.log('startLoad');\n    this.bufferController.startLoad();\n  }\n\n  recoverMediaError() {\n    logger.log('recoverMediaError');\n    var video = this.video;\n    this.detachVideo();\n    this.attachVideo(video);\n  }\n\n  /** Return all quality levels **/\n  get levels() {\n    return this.levelController.levels;\n  }\n\n  /** Return current playback quality level **/\n  get currentLevel() {\n    return this.bufferController.currentLevel;\n  }\n\n  /* set quality level immediately (-1 for automatic level selection) */\n  set currentLevel(newLevel) {\n    logger.log(`set currentLevel:${newLevel}`);\n    this.loadLevel = newLevel;\n    this.bufferController.immediateLevelSwitch();\n  }\n\n  /** Return next playback quality level (quality level of next fragment) **/\n  get nextLevel() {\n    return this.bufferController.nextLevel;\n  }\n\n  /* set quality level for next fragment (-1 for automatic level selection) */\n  set nextLevel(newLevel) {\n    logger.log(`set nextLevel:${newLevel}`);\n    this.levelController.manualLevel = newLevel;\n    this.bufferController.nextLevelSwitch();\n  }\n\n  /** Return the quality level of current/last loaded fragment **/\n  get loadLevel() {\n    return this.levelController.level;\n  }\n\n  /* set quality level for current/next loaded fragment (-1 for automatic level selection) */\n  set loadLevel(newLevel) {\n    logger.log(`set loadLevel:${newLevel}`);\n    this.levelController.manualLevel = newLevel;\n  }\n\n  /** Return the quality level of next loaded fragment **/\n  get nextLoadLevel() {\n    return this.levelController.nextLoadLevel();\n  }\n\n  /** set quality level of next loaded fragment **/\n  set nextLoadLevel(level) {\n    this.levelController.level = level;\n  }\n\n  /** Return first level (index of first level referenced in manifest)\n  **/\n  get firstLevel() {\n    return this.levelController.firstLevel;\n  }\n\n  /** set first level (index of first level referenced in manifest)\n  **/\n  set firstLevel(newLevel) {\n    logger.log(`set firstLevel:${newLevel}`);\n    this.levelController.firstLevel = newLevel;\n  }\n\n  /** Return start level (level of first fragment that will be played back)\n      if not overrided by user, first level appearing in manifest will be used as start level\n      if -1 : automatic start level selection, playback will start from level matching download bandwidth (determined from download of first segment)\n  **/\n  get startLevel() {\n    return this.levelController.startLevel;\n  }\n\n  /** set  start level (level of first fragment that will be played back)\n      if not overrided by user, first level appearing in manifest will be used as start level\n      if -1 : automatic start level selection, playback will start from level matching download bandwidth (determined from download of first segment)\n  **/\n  set startLevel(newLevel) {\n    logger.log(`set startLevel:${newLevel}`);\n    this.levelController.startLevel = newLevel;\n  }\n\n  /** Return the capping/max level value that could be used by automatic level selection algorithm **/\n  get autoLevelCapping() {\n    return this.abrController.autoLevelCapping;\n  }\n\n  /** set the capping/max level value that could be used by automatic level selection algorithm **/\n  set autoLevelCapping(newLevel) {\n    logger.log(`set autoLevelCapping:${newLevel}`);\n    this.abrController.autoLevelCapping = newLevel;\n  }\n\n  /* check if we are in automatic level selection mode */\n  get autoLevelEnabled() {\n    return (this.levelController.manualLevel === -1);\n  }\n\n  /* return manual level */\n  get manualLevel() {\n    return this.levelController.manualLevel;\n  }\n\n  onMediaSourceOpen() {\n    logger.log('media source opened');\n    this.trigger(Event.MSE_ATTACHED, {video: this.video, mediaSource: this.mediaSource});\n    // once received, don't listen anymore to sourceopen event\n    this.mediaSource.removeEventListener('sourceopen', this.onmso);\n  }\n\n  onMediaSourceClose() {\n    logger.log('media source closed');\n  }\n\n  onMediaSourceEnded() {\n    logger.log('media source ended');\n  }\n}\n\nexport default Hls;\n",
    "/*\n * Fragment Loader\n*/\n\nimport Event from '../events';\nimport {ErrorTypes, ErrorDetails} from '../errors';\n\nclass FragmentLoader {\n\n  constructor(hls) {\n    this.hls = hls;\n    this.onfl = this.onFragLoading.bind(this);\n    hls.on(Event.FRAG_LOADING, this.onfl);\n  }\n\n  destroy() {\n    if (this.loader) {\n      this.loader.destroy();\n      this.loader = null;\n    }\n    this.hls.off(Event.FRAG_LOADING, this.onfl);\n  }\n\n  onFragLoading(event, data) {\n    var frag = data.frag;\n    this.frag = frag;\n    this.frag.loaded = 0;\n    var config = this.hls.config;\n    frag.loader = this.loader = new config.loader(config);\n    this.loader.load(frag.url, 'arraybuffer', this.loadsuccess.bind(this), this.loaderror.bind(this), this.loadtimeout.bind(this), config.fragLoadingTimeOut, config.fragLoadingMaxRetry, config.fragLoadingRetryDelay, this.loadprogress.bind(this), frag);\n  }\n\n  loadsuccess(event, stats) {\n    var payload = event.currentTarget.response;\n    stats.length = payload.byteLength;\n    // detach fragment loader on load success\n    this.frag.loader = undefined;\n    this.hls.trigger(Event.FRAG_LOADED, {payload: payload, frag: this.frag, stats: stats});\n  }\n\n  loaderror(event) {\n    this.loader.abort();\n    this.hls.trigger(Event.ERROR, {type: ErrorTypes.NETWORK_ERROR, details: ErrorDetails.FRAG_LOAD_ERROR, fatal: false, frag: this.frag, response: event});\n  }\n\n  loadtimeout() {\n    this.loader.abort();\n    this.hls.trigger(Event.ERROR, {type: ErrorTypes.NETWORK_ERROR, details: ErrorDetails.FRAG_LOAD_TIMEOUT, fatal: false, frag: this.frag});\n  }\n\n  loadprogress(event, stats) {\n    this.frag.loaded = stats.loaded;\n   this.hls.trigger(Event.FRAG_LOAD_PROGRESS, {frag: this.frag, stats: stats});\n  }\n}\n\nexport default FragmentLoader;\n",
    "/**\n * Playlist Loader\n*/\n\nimport Event from '../events';\nimport {ErrorTypes, ErrorDetails} from '../errors';\n//import {logger} from '../utils/logger';\n\nclass PlaylistLoader {\n\n  constructor(hls) {\n    this.hls = hls;\n    this.onml = this.onManifestLoading.bind(this);\n    this.onll = this.onLevelLoading.bind(this);\n    hls.on(Event.MANIFEST_LOADING, this.onml);\n    hls.on(Event.LEVEL_LOADING, this.onll);\n  }\n\n  destroy() {\n    if (this.loader) {\n      this.loader.destroy();\n      this.loader = null;\n    }\n    this.url = this.id = null;\n    this.hls.off(Event.MANIFEST_LOADING, this.onml);\n    this.hls.off(Event.LEVEL_LOADING, this.onll);\n  }\n\n  onManifestLoading(event, data) {\n    this.load(data.url, null);\n  }\n\n  onLevelLoading(event, data) {\n    this.load(data.url, data.level, data.id);\n  }\n\n  load(url, id1, id2) {\n    var config = this.hls.config;\n    this.url = url;\n    this.id = id1;\n    this.id2 = id2;\n    this.loader = new config.loader(config);\n    this.loader.load(url, '', this.loadsuccess.bind(this), this.loaderror.bind(this), this.loadtimeout.bind(this), config.manifestLoadingTimeOut, config.manifestLoadingMaxRetry, config.manifestLoadingRetryDelay);\n  }\n\n  resolve(url, baseUrl) {\n    var doc      = document,\n        oldBase = doc.getElementsByTagName('base')[0],\n        oldHref = oldBase && oldBase.href,\n        docHead = doc.head || doc.getElementsByTagName('head')[0],\n        ourBase = oldBase || docHead.appendChild(doc.createElement('base')),\n        resolver = doc.createElement('a'),\n        resolvedUrl;\n    ourBase.href = baseUrl;\n    resolver.href = url;\n    resolvedUrl  = resolver.href; // browser magic at work here\n    if (oldBase) { oldBase.href = oldHref; }\n    else { docHead.removeChild(ourBase); }\n    return resolvedUrl;\n  }\n\n  parseMasterPlaylist(string, baseurl) {\n    var levels = [], level =  {}, result, codecs, codec;\n    // https://regex101.com is your friend\n    var re = /#EXT-X-STREAM-INF:([^\\n\\r]*(BAND)WIDTH=(\\d+))?([^\\n\\r]*(CODECS)=\\\"([^\\\"\\n\\r]*)\\\",?)?([^\\n\\r]*(RES)OLUTION=(\\d+)x(\\d+))?([^\\n\\r]*(NAME)=\\\"(.*)\\\")?[^\\n\\r]*[\\r\\n]+([^\\r\\n]+)/g;\n    while ((result = re.exec(string)) != null){\n      result.shift();\n      result = result.filter(function(n) { return (n !== undefined); });\n      level.url = this.resolve(result.pop(), baseurl);\n      while (result.length > 0) {\n        switch (result.shift()) {\n          case 'RES':\n            level.width = parseInt(result.shift());\n            level.height = parseInt(result.shift());\n            break;\n          case 'BAND':\n            level.bitrate = parseInt(result.shift());\n            break;\n          case 'NAME':\n            level.name = result.shift();\n            break;\n          case 'CODECS':\n            codecs = result.shift().split(',');\n            while (codecs.length > 0) {\n              codec = codecs.shift();\n              if (codec.indexOf('avc1') !== -1) {\n                level.videoCodec = this.avc1toavcoti(codec);\n              } else {\n                level.audioCodec = codec;\n              }\n            }\n            break;\n          default:\n            break;\n        }\n      }\n      levels.push(level);\n      level = {};\n    }\n    return levels;\n  }\n\n  avc1toavcoti(codec) {\n    var result, avcdata = codec.split('.');\n    if (avcdata.length > 2) {\n      result = avcdata.shift() + '.';\n      result += parseInt(avcdata.shift()).toString(16);\n      result += ('00' + parseInt(avcdata.shift()).toString(16)).substr(-4);\n    } else {\n      result = codec;\n    }\n    return result;\n  }\n\n  parseLevelPlaylist(string, baseurl, id) {\n    var currentSN = 0, totalduration = 0, level = {url: baseurl, fragments: [], live: true, startSN: 0}, result, regexp, cc = 0, frag, byteRangeEndOffset, byteRangeStartOffset;\n    regexp = /(?:#EXT-X-(MEDIA-SEQUENCE):(\\d+))|(?:#EXT-X-(TARGETDURATION):(\\d+))|(?:#EXT(INF):([\\d\\.]+)[^\\r\\n]*([\\r\\n]+[^#|\\r\\n]+)?)|(?:#EXT-X-(BYTERANGE):([\\d]+[@[\\d]*)]*[\\r\\n]+([^#|\\r\\n]+)?|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DIS)CONTINUITY))/g;\n    while ((result = regexp.exec(string)) !== null) {\n      result.shift();\n      result = result.filter(function(n) { return (n !== undefined); });\n      switch (result[0]) {\n        case 'MEDIA-SEQUENCE':\n          currentSN = level.startSN = parseInt(result[1]);\n          break;\n        case 'TARGETDURATION':\n          level.targetduration = parseFloat(result[1]);\n          break;\n        case 'ENDLIST':\n          level.live = false;\n          break;\n        case 'DIS':\n          cc++;\n          break;\n        case 'BYTERANGE':\n          var params = result[1].split('@');\n          if (params.length === 1) {\n            byteRangeStartOffset = byteRangeEndOffset;\n          } else {\n            byteRangeStartOffset = parseInt(params[1]);\n          }\n          byteRangeEndOffset = parseInt(params[0]) + byteRangeStartOffset;\n          frag = level.fragments.length ? level.fragments[level.fragments.length - 1] : null;\n          if (frag && !frag.url) {\n            frag.byteRangeStartOffset = byteRangeStartOffset;\n            frag.byteRangeEndOffset = byteRangeEndOffset;\n            frag.url = this.resolve(result[2], baseurl);\n          }\n          break;\n        case 'INF':\n          var duration = parseFloat(result[1]);\n          if (!isNaN(duration)) {\n            level.fragments.push({url: result[2] ? this.resolve(result[2], baseurl) : null, duration: duration, start: totalduration, sn: currentSN++, level: id, cc: cc, byteRangeStartOffset: byteRangeStartOffset, byteRangeEndOffset: byteRangeEndOffset});\n            totalduration += duration;\n            byteRangeStartOffset = null;\n          }\n          break;\n        default:\n          break;\n      }\n    }\n    //logger.log('found ' + level.fragments.length + ' fragments');\n    level.totalduration = totalduration;\n    level.endSN = currentSN - 1;\n    return level;\n  }\n\n  loadsuccess(event, stats) {\n    var string = event.currentTarget.responseText, url = event.currentTarget.responseURL, id = this.id, id2 = this.id2, hls = this.hls, levels;\n    // responseURL not supported on some browsers (it is used to detect URL redirection)\n    if (url === undefined) {\n      // fallback to initial URL\n      url = this.url;\n    }\n    stats.tload = new Date();\n    stats.mtime = new Date(event.currentTarget.getResponseHeader('Last-Modified'));\n    if (string.indexOf('#EXTM3U') === 0) {\n      if (string.indexOf('#EXTINF:') > 0) {\n        // 1 level playlist\n        // if first request, fire manifest loaded event, level will be reloaded afterwards\n        // (this is to have a uniform logic for 1 level/multilevel playlists)\n        if (this.id === null) {\n          hls.trigger(Event.MANIFEST_LOADED, {levels: [{url: url}], url: url, stats: stats});\n        } else {\n          hls.trigger(Event.LEVEL_LOADED, {details: this.parseLevelPlaylist(string, url, id), level: id, id: id2, stats: stats});\n        }\n      } else {\n        levels = this.parseMasterPlaylist(string, url);\n        // multi level playlist, parse level info\n        if (levels.length) {\n          hls.trigger(Event.MANIFEST_LOADED, {levels: levels, url: url, stats: stats});\n        } else {\n          hls.trigger(Event.ERROR, {type: ErrorTypes.NETWORK_ERROR, details: ErrorDetails.MANIFEST_PARSING_ERROR, fatal: true, url: url, reason: 'no level found in manifest'});\n        }\n      }\n    } else {\n      hls.trigger(Event.ERROR, {type: ErrorTypes.NETWORK_ERROR, details: ErrorDetails.MANIFEST_PARSING_ERROR, fatal: true, url: url, reason: 'no EXTM3U delimiter'});\n    }\n  }\n\n  loaderror(event) {\n    var details, fatal;\n    if (this.id === null) {\n      details = ErrorDetails.MANIFEST_LOAD_ERROR;\n      fatal = true;\n    } else {\n      details = ErrorDetails.LEVEL_LOAD_ERROR;\n      fatal = false;\n    }\n    this.loader.abort();\n    this.hls.trigger(Event.ERROR, {type: ErrorTypes.NETWORK_ERROR, details: details, fatal: fatal, url: this.url, loader: this.loader, response: event.currentTarget, level: this.id, id: this.id2});\n  }\n\n  loadtimeout() {\n    var details, fatal;\n    if (this.id === null) {\n      details = ErrorDetails.MANIFEST_LOAD_TIMEOUT;\n      fatal = true;\n    } else {\n      details = ErrorDetails.LEVEL_LOAD_TIMEOUT;\n      fatal = false;\n    }\n   this.loader.abort();\n   this.hls.trigger(Event.ERROR, {type: ErrorTypes.NETWORK_ERROR, details: details, fatal: fatal, url: this.url, loader: this.loader, level: this.id, id: this.id2});\n  }\n}\n\nexport default PlaylistLoader;\n",
    "/**\n * Generate MP4 Box\n*/\n\nclass MP4 {\n  static init() {\n    MP4.types = {\n      avc1: [], // codingname\n      avcC: [],\n      btrt: [],\n      dinf: [],\n      dref: [],\n      esds: [],\n      ftyp: [],\n      hdlr: [],\n      mdat: [],\n      mdhd: [],\n      mdia: [],\n      mfhd: [],\n      minf: [],\n      moof: [],\n      moov: [],\n      mp4a: [],\n      mvex: [],\n      mvhd: [],\n      sdtp: [],\n      stbl: [],\n      stco: [],\n      stsc: [],\n      stsd: [],\n      stsz: [],\n      stts: [],\n      tfdt: [],\n      tfhd: [],\n      traf: [],\n      trak: [],\n      trun: [],\n      trex: [],\n      tkhd: [],\n      vmhd: [],\n      smhd: []\n    };\n\n    var i;\n    for (i in MP4.types) {\n      if (MP4.types.hasOwnProperty(i)) {\n        MP4.types[i] = [\n          i.charCodeAt(0),\n          i.charCodeAt(1),\n          i.charCodeAt(2),\n          i.charCodeAt(3)\n        ];\n      }\n    }\n\n    MP4.MAJOR_BRAND = new Uint8Array([\n      'i'.charCodeAt(0),\n      's'.charCodeAt(0),\n      'o'.charCodeAt(0),\n      'm'.charCodeAt(0)\n    ]);\n\n    MP4.AVC1_BRAND = new Uint8Array([\n      'a'.charCodeAt(0),\n      'v'.charCodeAt(0),\n      'c'.charCodeAt(0),\n      '1'.charCodeAt(0)\n    ]);\n\n    MP4.MINOR_VERSION = new Uint8Array([0, 0, 0, 1]);\n\n    MP4.VIDEO_HDLR = new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x00, // pre_defined\n      0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x56, 0x69, 0x64, 0x65,\n      0x6f, 0x48, 0x61, 0x6e,\n      0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\n    ]);\n\n    MP4.AUDIO_HDLR = new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x00, // pre_defined\n      0x73, 0x6f, 0x75, 0x6e, // handler_type: 'soun'\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x53, 0x6f, 0x75, 0x6e,\n      0x64, 0x48, 0x61, 0x6e,\n      0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'SoundHandler'\n    ]);\n\n    MP4.HDLR_TYPES = {\n      'video': MP4.VIDEO_HDLR,\n      'audio': MP4.AUDIO_HDLR\n    };\n\n    MP4.DREF = new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01, // entry_count\n      0x00, 0x00, 0x00, 0x0c, // entry_size\n      0x75, 0x72, 0x6c, 0x20, // 'url' type\n      0x00, // version 0\n      0x00, 0x00, 0x01 // entry_flags\n    ]);\n    MP4.STCO = new Uint8Array([\n      0x00, // version\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x00 // entry_count\n    ]);\n    MP4.STSC = MP4.STCO;\n    MP4.STTS = MP4.STCO;\n    MP4.STSZ = new Uint8Array([\n      0x00, // version\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x00, // sample_size\n      0x00, 0x00, 0x00, 0x00, // sample_count\n    ]);\n    MP4.VMHD = new Uint8Array([\n      0x00, // version\n      0x00, 0x00, 0x01, // flags\n      0x00, 0x00, // graphicsmode\n      0x00, 0x00,\n      0x00, 0x00,\n      0x00, 0x00 // opcolor\n    ]);\n    MP4.SMHD = new Uint8Array([\n      0x00, // version\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, // balance\n      0x00, 0x00 // reserved\n    ]);\n\n    MP4.STSD = new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01]);// entry_count\n\n    MP4.FTYP = MP4.box(MP4.types.ftyp, MP4.MAJOR_BRAND, MP4.MINOR_VERSION, MP4.MAJOR_BRAND, MP4.AVC1_BRAND);\n    MP4.DINF = MP4.box(MP4.types.dinf, MP4.box(MP4.types.dref, MP4.DREF));\n  }\n\n  static box(type) {\n  var\n    payload = Array.prototype.slice.call(arguments, 1),\n    size = 0,\n    i = payload.length,\n    result,\n    view;\n    // calculate the total size we need to allocate\n    while (i--) {\n      size += payload[i].byteLength;\n    }\n    result = new Uint8Array(size + 8);\n    view = new DataView(result.buffer);\n    view.setUint32(0, result.byteLength);\n    result.set(type, 4);\n    // copy the payload into the result\n    for (i = 0, size = 8; i < payload.length; i++) {\n      result.set(payload[i], size);\n      size += payload[i].byteLength;\n    }\n    return result;\n  }\n\n  static hdlr(type) {\n    return MP4.box(MP4.types.hdlr, MP4.HDLR_TYPES[type]);\n  }\n\n  static mdat(data) {\n    return MP4.box(MP4.types.mdat, data);\n  }\n\n  static mdhd(timescale, duration) {\n    return MP4.box(MP4.types.mdhd, new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x02, // creation_time\n      0x00, 0x00, 0x00, 0x03, // modification_time\n      (timescale >> 24) & 0xFF,\n      (timescale >> 16) & 0xFF,\n      (timescale >>  8) & 0xFF,\n      timescale & 0xFF, // timescale\n      (duration >> 24),\n      (duration >> 16) & 0xFF,\n      (duration >>  8) & 0xFF,\n      duration & 0xFF, // duration\n      0x55, 0xc4, // 'und' language (undetermined)\n      0x00, 0x00\n    ]));\n  }\n\n  static mdia(track) {\n    return MP4.box(MP4.types.mdia, MP4.mdhd(track.timescale, track.duration), MP4.hdlr(track.type), MP4.minf(track));\n  }\n\n  static mfhd(sequenceNumber) {\n    return MP4.box(MP4.types.mfhd, new Uint8Array([\n      0x00,\n      0x00, 0x00, 0x00, // flags\n      (sequenceNumber >> 24),\n      (sequenceNumber >> 16) & 0xFF,\n      (sequenceNumber >>  8) & 0xFF,\n      sequenceNumber & 0xFF, // sequence_number\n    ]));\n  }\n\n  static minf(track) {\n    if (track.type === 'audio') {\n      return MP4.box(MP4.types.minf, MP4.box(MP4.types.smhd, MP4.SMHD), MP4.DINF, MP4.stbl(track));\n    } else {\n      return MP4.box(MP4.types.minf, MP4.box(MP4.types.vmhd, MP4.VMHD), MP4.DINF, MP4.stbl(track));\n    }\n  }\n\n  static moof(sn, baseMediaDecodeTime, track) {\n    return MP4.box(MP4.types.moof, MP4.mfhd(sn), MP4.traf(track,baseMediaDecodeTime));\n  }\n/**\n * @param tracks... (optional) {array} the tracks associated with this movie\n */\n  static moov(tracks) {\n    var\n      i = tracks.length,\n      boxes = [];\n\n    while (i--) {\n      boxes[i] = MP4.trak(tracks[i]);\n    }\n\n    return MP4.box.apply(null, [MP4.types.moov, MP4.mvhd(tracks[0].timescale, tracks[0].duration)].concat(boxes).concat(MP4.mvex(tracks)));\n  }\n\n  static mvex(tracks) {\n    var\n      i = tracks.length,\n      boxes = [];\n\n    while (i--) {\n      boxes[i] = MP4.trex(tracks[i]);\n    }\n    return MP4.box.apply(null, [MP4.types.mvex].concat(boxes));\n  }\n\n  static mvhd(timescale,duration) {\n    var\n      bytes = new Uint8Array([\n        0x00, // version 0\n        0x00, 0x00, 0x00, // flags\n        0x00, 0x00, 0x00, 0x01, // creation_time\n        0x00, 0x00, 0x00, 0x02, // modification_time\n        (timescale >> 24) & 0xFF,\n        (timescale >> 16) & 0xFF,\n        (timescale >>  8) & 0xFF,\n        timescale & 0xFF, // timescale\n        (duration >> 24) & 0xFF,\n        (duration >> 16) & 0xFF,\n        (duration >>  8) & 0xFF,\n        duration & 0xFF, // duration\n        0x00, 0x01, 0x00, 0x00, // 1.0 rate\n        0x01, 0x00, // 1.0 volume\n        0x00, 0x00, // reserved\n        0x00, 0x00, 0x00, 0x00, // reserved\n        0x00, 0x00, 0x00, 0x00, // reserved\n        0x00, 0x01, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x01, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00, // pre_defined\n        0xff, 0xff, 0xff, 0xff // next_track_ID\n      ]);\n    return MP4.box(MP4.types.mvhd, bytes);\n  }\n\n  static sdtp(track) {\n    var\n      samples = track.samples || [],\n      bytes = new Uint8Array(4 + samples.length),\n      flags,\n      i;\n    // leave the full box header (4 bytes) all zero\n    // write the sample table\n    for (i = 0; i < samples.length; i++) {\n      flags = samples[i].flags;\n      bytes[i + 4] = (flags.dependsOn << 4) |\n        (flags.isDependedOn << 2) |\n        (flags.hasRedundancy);\n    }\n\n    return MP4.box(MP4.types.sdtp, bytes);\n  }\n\n  static stbl(track) {\n    return MP4.box(MP4.types.stbl, MP4.stsd(track), MP4.box(MP4.types.stts, MP4.STTS), MP4.box(MP4.types.stsc, MP4.STSC), MP4.box(MP4.types.stsz, MP4.STSZ), MP4.box(MP4.types.stco, MP4.STCO));\n  }\n\n  static avc1(track) {\n    var sps = [], pps = [], i;\n    // assemble the SPSs\n    for (i = 0; i < track.sps.length; i++) {\n      sps.push((track.sps[i].byteLength >>> 8) & 0xFF);\n      sps.push((track.sps[i].byteLength & 0xFF)); // sequenceParameterSetLength\n      sps = sps.concat(Array.prototype.slice.call(track.sps[i])); // SPS\n    }\n    // assemble the PPSs\n    for (i = 0; i < track.pps.length; i++) {\n      pps.push((track.pps[i].byteLength >>> 8) & 0xFF);\n      pps.push((track.pps[i].byteLength & 0xFF));\n      pps = pps.concat(Array.prototype.slice.call(track.pps[i]));\n    }\n    return MP4.box(MP4.types.avc1, new Uint8Array([\n        0x00, 0x00, 0x00, // reserved\n        0x00, 0x00, 0x00, // reserved\n        0x00, 0x01, // data_reference_index\n        0x00, 0x00, // pre_defined\n        0x00, 0x00, // reserved\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00, // pre_defined\n        (track.width >> 8) & 0xFF,\n        track.width & 0xff, // width\n        (track.height >> 8) & 0xFF,\n        track.height & 0xff, // height\n        0x00, 0x48, 0x00, 0x00, // horizresolution\n        0x00, 0x48, 0x00, 0x00, // vertresolution\n        0x00, 0x00, 0x00, 0x00, // reserved\n        0x00, 0x01, // frame_count\n        0x13,\n        0x76, 0x69, 0x64, 0x65,\n        0x6f, 0x6a, 0x73, 0x2d,\n        0x63, 0x6f, 0x6e, 0x74,\n        0x72, 0x69, 0x62, 0x2d,\n        0x68, 0x6c, 0x73, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, // compressorname\n        0x00, 0x18, // depth = 24\n        0x11, 0x11]), // pre_defined = -1\n          MP4.box(MP4.types.avcC, new Uint8Array([\n            0x01, // configurationVersion\n            track.profileIdc, // AVCProfileIndication\n            track.profileCompat, // profile_compatibility\n            track.levelIdc, // AVCLevelIndication\n            0xff // lengthSizeMinusOne, hard-coded to 4 bytes\n          ].concat([\n            track.sps.length // numOfSequenceParameterSets\n          ]).concat(sps).concat([\n            track.pps.length // numOfPictureParameterSets\n          ]).concat(pps))), // \"PPS\"\n          MP4.box(MP4.types.btrt, new Uint8Array([\n            0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\n            0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\n            0x00, 0x2d, 0xc6, 0xc0])) // avgBitrate\n          );\n  }\n\n  static esds(track) {\n    return new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n\n      0x03, // descriptor_type\n      0x17+track.config.length, // length\n      0x00, 0x01, //es_id\n      0x00, // stream_priority\n\n      0x04, // descriptor_type\n      0x0f+track.config.length, // length\n      0x40, //codec : mpeg4_audio\n      0x15, // stream_type\n      0x00, 0x00, 0x00, // buffer_size\n      0x00, 0x00, 0x00, 0x00, // maxBitrate\n      0x00, 0x00, 0x00, 0x00, // avgBitrate\n\n      0x05 // descriptor_type\n      ].concat([track.config.length]).concat(track.config).concat([0x06, 0x01, 0x02])); // GASpecificConfig)); // length + audio config descriptor\n  }\n\n  static mp4a(track) {\n        return MP4.box(MP4.types.mp4a, new Uint8Array([\n        0x00, 0x00, 0x00, // reserved\n        0x00, 0x00, 0x00, // reserved\n        0x00, 0x01, // data_reference_index\n        0x00, 0x00, 0x00, 0x00,\n        0x00, 0x00, 0x00, 0x00, // reserved\n        0x00, track.channelCount, // channelcount\n        0x00, 0x10, // sampleSize:16bits\n        0x00, 0x00, 0x00, 0x00, // reserved2\n        (track.audiosamplerate >> 8) & 0xFF,\n        track.audiosamplerate & 0xff, //\n        0x00, 0x00]),\n        MP4.box(MP4.types.esds, MP4.esds(track)));\n  }\n\n  static stsd(track) {\n    if (track.type === 'audio') {\n      return MP4.box(MP4.types.stsd, MP4.STSD, MP4.mp4a(track));\n    } else {\n      return MP4.box(MP4.types.stsd, MP4.STSD, MP4.avc1(track));\n    }\n  }\n\n  static tkhd(track) {\n    return MP4.box(MP4.types.tkhd, new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x07, // flags\n      0x00, 0x00, 0x00, 0x00, // creation_time\n      0x00, 0x00, 0x00, 0x00, // modification_time\n      (track.id >> 24) & 0xFF,\n      (track.id >> 16) & 0xFF,\n      (track.id >> 8) & 0xFF,\n      track.id & 0xFF, // track_ID\n      0x00, 0x00, 0x00, 0x00, // reserved\n      (track.duration >> 24),\n      (track.duration >> 16) & 0xFF,\n      (track.duration >>  8) & 0xFF,\n      track.duration & 0xFF, // duration\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, // layer\n      0x00, 0x00, // alternate_group\n      0x00, 0x00, // non-audio track volume\n      0x00, 0x00, // reserved\n      0x00, 0x01, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x01, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n      (track.width >> 8) & 0xFF,\n      track.width & 0xFF,\n      0x00, 0x00, // width\n      (track.height >> 8) & 0xFF,\n      track.height & 0xFF,\n      0x00, 0x00 // height\n    ]));\n  }\n\n  static traf(track,baseMediaDecodeTime) {\n    var sampleDependencyTable = MP4.sdtp(track);\n    return MP4.box(MP4.types.traf,\n               MP4.box(MP4.types.tfhd, new Uint8Array([\n                 0x00, // version 0\n                 0x00, 0x00, 0x00, // flags\n                 (track.id >> 24),\n                 (track.id >> 16) & 0XFF,\n                 (track.id >> 8) & 0XFF,\n                 (track.id & 0xFF) // track_ID\n               ])),\n               MP4.box(MP4.types.tfdt, new Uint8Array([\n                 0x00, // version 0\n                 0x00, 0x00, 0x00, // flags\n                 (baseMediaDecodeTime >>24),\n                 (baseMediaDecodeTime >> 16) & 0XFF,\n                 (baseMediaDecodeTime >> 8) & 0XFF,\n                 (baseMediaDecodeTime & 0xFF) // baseMediaDecodeTime\n               ])),\n               MP4.trun(track,\n                    sampleDependencyTable.length +\n                    16 + // tfhd\n                    16 + // tfdt\n                    8 +  // traf header\n                    16 + // mfhd\n                    8 +  // moof header\n                    8),  // mdat header\n               sampleDependencyTable);\n  }\n\n  /**\n   * Generate a track box.\n   * @param track {object} a track definition\n   * @return {Uint8Array} the track box\n   */\n  static trak(track) {\n    track.duration = track.duration || 0xffffffff;\n    return MP4.box(MP4.types.trak, MP4.tkhd(track), MP4.mdia(track));\n  }\n\n  static trex(track) {\n    return MP4.box(MP4.types.trex, new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n     (track.id >> 24),\n     (track.id >> 16) & 0XFF,\n     (track.id >> 8) & 0XFF,\n     (track.id & 0xFF), // track_ID\n      0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n      0x00, 0x00, 0x00, 0x00, // default_sample_duration\n      0x00, 0x00, 0x00, 0x00, // default_sample_size\n      0x00, 0x01, 0x00, 0x01 // default_sample_flags\n    ]));\n  }\n\n  static trun(track, offset) {\n    var samples, sample, i, array;\n    samples = track.samples || [];\n    array = new Uint8Array(12 + (16 * samples.length));\n    offset += 8 + array.byteLength;\n    array.set([\n      0x00, // version 0\n      0x00, 0x0f, 0x01, // flags\n      (samples.length >>> 24) & 0xFF,\n      (samples.length >>> 16) & 0xFF,\n      (samples.length >>> 8) & 0xFF,\n      samples.length & 0xFF, // sample_count\n      (offset >>> 24) & 0xFF,\n      (offset >>> 16) & 0xFF,\n      (offset >>> 8) & 0xFF,\n      offset & 0xFF // data_offset\n    ],0);\n    for (i = 0; i < samples.length; i++) {\n      sample = samples[i];\n      array.set([\n        (sample.duration >>> 24) & 0xFF,\n        (sample.duration >>> 16) & 0xFF,\n        (sample.duration >>> 8) & 0xFF,\n        sample.duration & 0xFF, // sample_duration\n        (sample.size >>> 24) & 0xFF,\n        (sample.size >>> 16) & 0xFF,\n        (sample.size >>> 8) & 0xFF,\n        sample.size & 0xFF, // sample_size\n        (sample.flags.isLeading << 2) | sample.flags.dependsOn,\n        (sample.flags.isDependedOn << 6) |\n          (sample.flags.hasRedundancy << 4) |\n          (sample.flags.paddingValue << 1) |\n          sample.flags.isNonSync,\n        sample.flags.degradPrio & 0xF0 << 8,\n        sample.flags.degradPrio & 0x0F, // sample_flags\n        (sample.cts >>> 24) & 0xFF,\n        (sample.cts >>> 16) & 0xFF,\n        (sample.cts >>> 8) & 0xFF,\n        sample.cts & 0xFF // sample_composition_time_offset\n      ],12+16*i);\n    }\n    return MP4.box(MP4.types.trun, array);\n  }\n\n  static initSegment(tracks) {\n    if (!MP4.types) {\n      MP4.init();\n    }\n    var movie = MP4.moov(tracks), result;\n    result = new Uint8Array(MP4.FTYP.byteLength + movie.byteLength);\n    result.set(MP4.FTYP);\n    result.set(movie, MP4.FTYP.byteLength);\n    return result;\n  }\n}\n\nexport default MP4;\n",
    "/**\n * fMP4 remuxer\n*/\n\n\nimport Event from '../events';\nimport {logger} from '../utils/logger';\nimport MP4 from '../remux/mp4-generator';\nimport {ErrorTypes, ErrorDetails} from '../errors';\n\nclass MP4Remuxer {\n  constructor(observer) {\n    this.observer = observer;\n    this.ISGenerated = false;\n    this.PES2MP4SCALEFACTOR = 4;\n    this.PES_TIMESCALE = 90000;\n    this.MP4_TIMESCALE = this.PES_TIMESCALE / this.PES2MP4SCALEFACTOR;\n  }\n\n  get timescale() {\n    return this.MP4_TIMESCALE;\n  }\n\n  destroy() {\n  }\n\n  insertDiscontinuity() {\n    this._initPTS = this._initDTS = this.nextAacPts = this.nextAvcDts = undefined;\n  }\n\n  switchLevel() {\n    this.ISGenerated = false;\n  }\n\n  remux(audioTrack,videoTrack,id3Track,timeOffset) {\n    // generate Init Segment if needed\n    if (!this.ISGenerated) {\n      this.generateIS(audioTrack,videoTrack,timeOffset);\n    }\n    //logger.log('nb AVC samples:' + videoTrack.samples.length);\n    if (videoTrack.samples.length) {\n      this.remuxVideo(videoTrack,timeOffset);\n    }\n    //logger.log('nb AAC samples:' + audioTrack.samples.length);\n    if (audioTrack.samples.length) {\n      this.remuxAudio(audioTrack,timeOffset);\n    }\n    //logger.log('nb ID3 samples:' + audioTrack.samples.length);\n    if (id3Track.samples.length) {\n      this.remuxID3(id3Track,timeOffset);\n    }\n    //notify end of parsing\n    this.observer.trigger(Event.FRAG_PARSED);\n  }\n\n  generateIS(audioTrack,videoTrack,timeOffset) {\n    var observer = this.observer,\n        audioSamples = audioTrack.samples,\n        videoSamples = videoTrack.samples,\n        nbAudio = audioSamples.length,\n        nbVideo = videoSamples.length,\n        pesTimeScale = this.PES_TIMESCALE;\n\n    if(nbAudio === 0 && nbVideo === 0) {\n      observer.trigger(Event.ERROR, {type : ErrorTypes.MEDIA_ERROR, details: ErrorDetails.FRAG_PARSING_ERROR, fatal: false, reason: 'no audio/video samples found'});\n    } else if (nbVideo === 0) {\n      //audio only\n      if (audioTrack.config) {\n         observer.trigger(Event.FRAG_PARSING_INIT_SEGMENT, {\n          audioMoov: MP4.initSegment([audioTrack]),\n          audioCodec : audioTrack.codec,\n          audioChannelCount : audioTrack.channelCount\n        });\n        this.ISGenerated = true;\n      }\n      if (this._initPTS === undefined) {\n        // remember first PTS of this demuxing context\n        this._initPTS = audioSamples[0].pts - pesTimeScale * timeOffset;\n        this._initDTS = audioSamples[0].dts - pesTimeScale * timeOffset;\n      }\n    } else\n    if (nbAudio === 0) {\n      //video only\n      if (videoTrack.sps && videoTrack.pps) {\n         observer.trigger(Event.FRAG_PARSING_INIT_SEGMENT, {\n          videoMoov: MP4.initSegment([videoTrack]),\n          videoCodec: videoTrack.codec,\n          videoWidth: videoTrack.width,\n          videoHeight: videoTrack.height\n        });\n        this.ISGenerated = true;\n        if (this._initPTS === undefined) {\n          // remember first PTS of this demuxing context\n          this._initPTS = videoSamples[0].pts - pesTimeScale * timeOffset;\n          this._initDTS = videoSamples[0].dts - pesTimeScale * timeOffset;\n        }\n      }\n    } else {\n      //audio and video\n      if (audioTrack.config && videoTrack.sps && videoTrack.pps) {\n          observer.trigger(Event.FRAG_PARSING_INIT_SEGMENT, {\n          audioMoov: MP4.initSegment([audioTrack]),\n          audioCodec: audioTrack.codec,\n          audioChannelCount: audioTrack.channelCount,\n          videoMoov: MP4.initSegment([videoTrack]),\n          videoCodec: videoTrack.codec,\n          videoWidth: videoTrack.width,\n          videoHeight: videoTrack.height\n        });\n        this.ISGenerated = true;\n        if (this._initPTS === undefined) {\n          // remember first PTS of this demuxing context\n          this._initPTS = Math.min(videoSamples[0].pts, audioSamples[0].pts) - pesTimeScale * timeOffset;\n          this._initDTS = Math.min(videoSamples[0].dts, audioSamples[0].dts) - pesTimeScale * timeOffset;\n        }\n      }\n    }\n  }\n\n  remuxVideo(track, timeOffset) {\n    var view,\n        i = 8,\n        pesTimeScale = this.PES_TIMESCALE,\n        pes2mp4ScaleFactor = this.PES2MP4SCALEFACTOR,\n        avcSample,\n        mp4Sample,\n        mp4SampleLength,\n        unit,\n        mdat, moof,\n        firstPTS, firstDTS, lastDTS,\n        pts, dts, ptsnorm, dtsnorm,\n        samples = [];\n    /* concatenate the video data and construct the mdat in place\n      (need 8 more bytes to fill length and mpdat type) */\n    mdat = new Uint8Array(track.len + (4 * track.nbNalu) + 8);\n    view = new DataView(mdat.buffer);\n    view.setUint32(0, mdat.byteLength);\n    mdat.set(MP4.types.mdat, 4);\n    while (track.samples.length) {\n      avcSample = track.samples.shift();\n      mp4SampleLength = 0;\n      // convert NALU bitstream to MP4 format (prepend NALU with size field)\n      while (avcSample.units.units.length) {\n        unit = avcSample.units.units.shift();\n        view.setUint32(i, unit.data.byteLength);\n        i += 4;\n        mdat.set(unit.data, i);\n        i += unit.data.byteLength;\n        mp4SampleLength += 4 + unit.data.byteLength;\n      }\n      pts = avcSample.pts - this._initDTS;\n      dts = avcSample.dts - this._initDTS;\n      //logger.log('Video/PTS/DTS:' + pts + '/' + dts);\n      // if not first AVC sample of video track, normalize PTS/DTS with previous sample value\n      // and ensure that sample duration is positive\n      if (lastDTS !== undefined) {\n        ptsnorm = this._PTSNormalize(pts, lastDTS);\n        dtsnorm = this._PTSNormalize(dts, lastDTS);\n        mp4Sample.duration = (dtsnorm - lastDTS) / pes2mp4ScaleFactor;\n        if (mp4Sample.duration < 0) {\n          //logger.log('invalid sample duration at PTS/DTS::' + avcSample.pts + '/' + avcSample.dts + ':' + mp4Sample.duration);\n          mp4Sample.duration = 0;\n        }\n      } else {\n        // first AVC sample of video track, normalize PTS/DTS\n        ptsnorm = this._PTSNormalize(pts, this.nextAvcDts);\n        dtsnorm = this._PTSNormalize(dts, this.nextAvcDts);\n        // check if first AVC sample is contiguous with last sample of previous track\n        // delta between next DTS and dtsnorm should be less than 1\n        if (this.nextAvcDts) {\n          var delta = Math.round((dtsnorm - this.nextAvcDts) / 90), absdelta = Math.abs(delta);\n          //logger.log('absdelta/dts:' + absdelta + '/' + dtsnorm);\n          // if delta is less than 300 ms, next loaded fragment is assumed to be contiguous with last one\n          if (absdelta < 300) {\n            if (delta > 1) {\n              logger.log(`AVC:${delta} ms hole between fragments detected,filling it`);\n            } else if (delta < -1) {\n              logger.log(`AVC:${(-delta)} ms overlapping between fragments detected`);\n            }\n            if(absdelta) {\n              // set DTS to next DTS\n              dtsnorm = this.nextAvcDts;\n              // offset PTS as well, ensure that PTS is smaller or equal than new DTS\n              ptsnorm = Math.max(ptsnorm - delta, dtsnorm);\n              logger.log('Video/PTS/DTS adjusted:' + ptsnorm + '/' + dtsnorm);\n            }\n          } else {\n            // not contiguous timestamp, check if DTS is within acceptable range\n            var expectedDTS = pesTimeScale * timeOffset;\n            // check if there is any unexpected drift between expected timestamp and real one\n            if (Math.abs(expectedDTS - dtsnorm) > (pesTimeScale * 3600)) {\n              //logger.log('PTS looping ??? AVC PTS delta:${expectedPTS-ptsnorm}');\n              var dtsOffset = expectedDTS - dtsnorm;\n              // set PTS to next expected PTS;\n              dtsnorm = expectedDTS;\n              ptsnorm = dtsnorm;\n              // offset initPTS/initDTS to fix computation for following samples\n              this._initPTS -= dtsOffset;\n              this._initDTS -= dtsOffset;\n            }\n          }\n        }\n        // remember first PTS of our avcSamples, ensure value is positive\n        firstPTS = Math.max(0, ptsnorm);\n        firstDTS = Math.max(0, dtsnorm);\n      }\n      //console.log('PTS/DTS/initDTS/normPTS/normDTS/relative PTS : ${avcSample.pts}/${avcSample.dts}/${this._initDTS}/${ptsnorm}/${dtsnorm}/${(avcSample.pts/4294967296).toFixed(3)}');\n      mp4Sample = {\n        size: mp4SampleLength,\n        duration: 0,\n        cts: (ptsnorm - dtsnorm) / pes2mp4ScaleFactor,\n        flags: {\n          isLeading: 0,\n          isDependedOn: 0,\n          hasRedundancy: 0,\n          degradPrio: 0\n        }\n      };\n      if (avcSample.key === true) {\n        // the current sample is a key frame\n        mp4Sample.flags.dependsOn = 2;\n        mp4Sample.flags.isNonSync = 0;\n      } else {\n        mp4Sample.flags.dependsOn = 1;\n        mp4Sample.flags.isNonSync = 1;\n      }\n      samples.push(mp4Sample);\n      lastDTS = dtsnorm;\n    }\n    if (samples.length >= 2) {\n      mp4Sample.duration = samples[samples.length - 2].duration;\n    }\n    // next AVC sample DTS should be equal to last sample DTS + last sample duration\n    this.nextAvcDts = dtsnorm + mp4Sample.duration * pes2mp4ScaleFactor;\n    track.len = 0;\n    track.nbNalu = 0;\n    if(navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {\n    // chrome workaround, mark first sample as being a Random Access Point to avoid sourcebuffer append issue\n    // https://code.google.com/p/chromium/issues/detail?id=229412\n      samples[0].flags.dependsOn = 2;\n      samples[0].flags.isNonSync = 0;\n    }\n    track.samples = samples;\n    moof = MP4.moof(track.sequenceNumber++, firstDTS / pes2mp4ScaleFactor, track);\n    track.samples = [];\n    this.observer.trigger(Event.FRAG_PARSING_DATA, {\n      moof: moof,\n      mdat: mdat,\n      startPTS: firstPTS / pesTimeScale,\n      endPTS: (ptsnorm + pes2mp4ScaleFactor * mp4Sample.duration) / pesTimeScale,\n      startDTS: firstDTS / pesTimeScale,\n      endDTS: (dtsnorm + pes2mp4ScaleFactor * mp4Sample.duration) / pesTimeScale,\n      type: 'video',\n      nb: samples.length\n    });\n  }\n\n  remuxAudio(track,timeOffset) {\n    var view,\n        i = 8,\n        pesTimeScale = this.PES_TIMESCALE,\n        pes2mp4ScaleFactor = this.PES2MP4SCALEFACTOR,\n        aacSample, mp4Sample,\n        unit,\n        mdat, moof,\n        firstPTS, firstDTS, lastDTS,\n        pts, dts, ptsnorm, dtsnorm,\n        samples = [];\n    /* concatenate the audio data and construct the mdat in place\n      (need 8 more bytes to fill length and mdat type) */\n    mdat = new Uint8Array(track.len + 8);\n    view = new DataView(mdat.buffer);\n    view.setUint32(0, mdat.byteLength);\n    mdat.set(MP4.types.mdat, 4);\n    while (track.samples.length) {\n      aacSample = track.samples.shift();\n      unit = aacSample.unit;\n      mdat.set(unit, i);\n      i += unit.byteLength;\n      pts = aacSample.pts - this._initDTS;\n      dts = aacSample.dts - this._initDTS;\n      //logger.log('Audio/PTS:' + aacSample.pts.toFixed(0));\n      if (lastDTS !== undefined) {\n        ptsnorm = this._PTSNormalize(pts, lastDTS);\n        dtsnorm = this._PTSNormalize(dts, lastDTS);\n        // we use DTS to compute sample duration, but we use PTS to compute initPTS which is used to sync audio and video\n        mp4Sample.duration = (dtsnorm - lastDTS) / pes2mp4ScaleFactor;\n        if (mp4Sample.duration < 0) {\n          //logger.log('invalid sample duration at PTS/DTS::' + aacSample.pts + '/' + aacSample.dts + ':' + mp4Sample.duration);\n          mp4Sample.duration = 0;\n        }\n      } else {\n        ptsnorm = this._PTSNormalize(pts, this.nextAacPts);\n        dtsnorm = this._PTSNormalize(dts, this.nextAacPts);\n        // check if fragments are contiguous (i.e. no missing frames between fragment)\n        if (this.nextAacPts && this.nextAacPts !== ptsnorm) {\n          //logger.log('Audio next PTS:' + this.nextAacPts);\n          var delta = Math.round(1000 * (ptsnorm - this.nextAacPts) / pesTimeScale), absdelta = Math.abs(delta);\n          // if delta is less than 300 ms, next loaded fragment is assumed to be contiguous with last one\n          if (absdelta > 1 && absdelta < 300) {\n            if (delta > 0) {\n              logger.log(`AAC:${delta} ms hole between fragments detected,filling it`);\n              // set PTS to next PTS, and ensure PTS is greater or equal than last DTS\n              //logger.log('Audio/PTS/DTS adjusted:' + aacSample.pts + '/' + aacSample.dts);\n            } else {\n              logger.log(`AAC:${(-delta)} ms overlapping between fragments detected`);\n            }\n            // set DTS to next DTS\n            ptsnorm = dtsnorm = this.nextAacPts;\n            logger.log('Audio/PTS/DTS adjusted:' + ptsnorm + '/' + dtsnorm);\n          }\n          else if (absdelta) {\n            // not contiguous timestamp, check if PTS is within acceptable range\n            var expectedPTS = pesTimeScale * timeOffset;\n            //logger.log('expectedPTS/PTSnorm:${expectedPTS}/${ptsnorm}/${expectedPTS-ptsnorm}');\n            // check if there is any unexpected drift between expected timestamp and real one\n            if (Math.abs(expectedPTS - ptsnorm) > pesTimeScale * 3600) {\n              //logger.log('PTS looping ??? AAC PTS delta:${expectedPTS-ptsnorm}');\n              var ptsOffset = expectedPTS - ptsnorm;\n              // set PTS to next expected PTS;\n              ptsnorm = expectedPTS;\n              dtsnorm = ptsnorm;\n              // offset initPTS/initDTS to fix computation for following samples\n              this._initPTS -= ptsOffset;\n              this._initDTS -= ptsOffset;\n            }\n          }\n        }\n        // remember first PTS of our aacSamples, ensure value is positive\n        firstPTS = Math.max(0, ptsnorm);\n        firstDTS = Math.max(0, dtsnorm);\n      }\n      //console.log('PTS/DTS/initDTS/normPTS/normDTS/relative PTS : ${aacSample.pts}/${aacSample.dts}/${this._initDTS}/${ptsnorm}/${dtsnorm}/${(aacSample.pts/4294967296).toFixed(3)}');\n      mp4Sample = {\n        size: unit.byteLength,\n        cts: 0,\n        duration:0,\n        flags: {\n          isLeading: 0,\n          isDependedOn: 0,\n          hasRedundancy: 0,\n          degradPrio: 0,\n          dependsOn: 1,\n        }\n      };\n      samples.push(mp4Sample);\n      lastDTS = dtsnorm;\n    }\n    //set last sample duration as being identical to previous sample\n    if (samples.length >= 2) {\n      mp4Sample.duration = samples[samples.length - 2].duration;\n    }\n    // next aac sample PTS should be equal to last sample PTS + duration\n    this.nextAacPts = ptsnorm + pes2mp4ScaleFactor * mp4Sample.duration;\n    //logger.log('Audio/PTS/PTSend:' + aacSample.pts.toFixed(0) + '/' + this.nextAacDts.toFixed(0));\n    track.len = 0;\n    track.samples = samples;\n    moof = MP4.moof(track.sequenceNumber++, firstDTS / pes2mp4ScaleFactor, track);\n    track.samples = [];\n    this.observer.trigger(Event.FRAG_PARSING_DATA, {\n      moof: moof,\n      mdat: mdat,\n      startPTS: firstPTS / pesTimeScale,\n      endPTS: this.nextAacPts / pesTimeScale,\n      startDTS: firstDTS / pesTimeScale,\n      endDTS: (dtsnorm + pes2mp4ScaleFactor * mp4Sample.duration) / pesTimeScale,\n      type: 'audio',\n      nb: samples.length\n    });\n  }\n\n  remuxID3(track,timeOffset) {\n    var length = track.samples.length, sample;\n    // consume samples\n    if(length) {\n      for(var index = 0; index < length; index++) {\n        sample = track.samples[index];\n        // setting id3 pts, dts to relative time\n        // using this._initPTS and this._initDTS to calculate relative time\n        sample.pts = ((sample.pts - this._initPTS) / this.PES_TIMESCALE);\n        sample.dts = ((sample.dts - this._initDTS) / this.PES_TIMESCALE);\n      }\n      this.observer.trigger(Event.FRAG_PARSING_METADATA, {\n        samples:track.samples\n      });\n    }\n\n    track.samples = [];\n    timeOffset = timeOffset;\n  }\n\n  _PTSNormalize(value, reference) {\n    var offset;\n    if (reference === undefined) {\n      return value;\n    }\n    if (reference < value) {\n      // - 2^33\n      offset = -8589934592;\n    } else {\n      // + 2^33\n      offset = 8589934592;\n    }\n    /* PTS is 33bit (from 0 to 2^33 -1)\n      if diff between value and reference is bigger than half of the amplitude (2^32) then it means that\n      PTS looping occured. fill the gap */\n    while (Math.abs(value - reference) > 4294967296) {\n        value += offset;\n    }\n    return value;\n  }\n\n}\n\nexport default MP4Remuxer;\n",
    "'use strict';\n\nfunction noop() {}\n\nlet fakeLogger = {\n  log: noop,\n  warn: noop,\n  info: noop,\n  error: noop\n};\n\nlet exportedLogger = fakeLogger;\n\nexport var enableLogs = function(debug) {\n  if (debug === true || typeof debug === 'object') {\n    exportedLogger.log = debug.log ? debug.log.bind(debug) : console.log.bind(console);\n    exportedLogger.info = debug.info ? debug.info.bind(debug) : console.info.bind(console);\n    exportedLogger.error = debug.error ? debug.error.bind(debug) : console.error.bind(console);\n    exportedLogger.warn = debug.warn ? debug.warn.bind(debug) : console.warn.bind(console);\n    // Some browsers don't allow to use bind on console object anyway\n    // fallback to default if needed\n    try {\n     exportedLogger.log();\n    }\n    catch (e) {\n      exportedLogger.log = noop;\n      exportedLogger.info = noop;\n      exportedLogger.error = noop;\n      exportedLogger.warn = noop;\n    }\n  }\n  else {\n    exportedLogger = fakeLogger;\n  }\n};\n\nexport var logger = exportedLogger;\n",
    "/**\n * XHR based logger\n*/\n\nimport {logger} from '../utils/logger';\n\nclass XhrLoader {\n\n  constructor(config) {\n    if (config && config.xhrSetup) {\n      this.xhrSetup = config.xhrSetup;\n    }\n  }\n\n  destroy() {\n    this.abort();\n    this.loader = null;\n  }\n\n  abort() {\n    if (this.loader && this.loader.readyState !== 4) {\n      this.stats.aborted = true;\n      this.loader.abort();\n    }\n    if (this.timeoutHandle) {\n      window.clearTimeout(this.timeoutHandle);\n    }\n  }\n\n  load(url, responseType, onSuccess, onError, onTimeout, timeout, maxRetry, retryDelay, onProgress = null, frag = null) {\n    this.url = url;\n    if (frag && !isNaN(frag.byteRangeStartOffset) && !isNaN(frag.byteRangeEndOffset)) {\n        this.byteRange = frag.byteRangeStartOffset + '-' + frag.byteRangeEndOffset;\n    }\n    this.responseType = responseType;\n    this.onSuccess = onSuccess;\n    this.onProgress = onProgress;\n    this.onTimeout = onTimeout;\n    this.onError = onError;\n    this.stats = {trequest: new Date(), retry: 0};\n    this.timeout = timeout;\n    this.maxRetry = maxRetry;\n    this.retryDelay = retryDelay;\n    this.timeoutHandle = window.setTimeout(this.loadtimeout.bind(this), timeout);\n    this.loadInternal();\n  }\n\n  loadInternal() {\n    var xhr = this.loader = new XMLHttpRequest();\n    xhr.onload =  this.loadsuccess.bind(this);\n    xhr.onerror = this.loaderror.bind(this);\n    xhr.onprogress = this.loadprogress.bind(this);\n    xhr.open('GET', this.url, true);\n    if (this.byteRange) {\n      xhr.setRequestHeader('Range', 'bytes=' + this.byteRange);\n    }\n    xhr.responseType = this.responseType;\n    this.stats.tfirst = null;\n    this.stats.loaded = 0;\n    if (this.xhrSetup) {\n      this.xhrSetup(xhr);\n    }\n    xhr.send();\n  }\n\n  loadsuccess(event) {\n    window.clearTimeout(this.timeoutHandle);\n    this.stats.tload = new Date();\n    this.onSuccess(event, this.stats);\n  }\n\n  loaderror(event) {\n    if (this.stats.retry < this.maxRetry) {\n      logger.warn(`${event.type} while loading ${this.url}, retrying in ${this.retryDelay}...`);\n      this.destroy();\n      window.setTimeout(this.loadInternal.bind(this), this.retryDelay);\n      // exponential backoff\n      this.retryDelay = Math.min(2 * this.retryDelay, 64000);\n      this.stats.retry++;\n    } else {\n      window.clearTimeout(this.timeoutHandle);\n      logger.error(`${event.type} while loading ${this.url}` );\n      this.onError(event);\n    }\n  }\n\n  loadtimeout(event) {\n    logger.warn(`timeout while loading ${this.url}` );\n    this.onTimeout(event, this.stats);\n  }\n\n  loadprogress(event) {\n    var stats = this.stats;\n    if (stats.tfirst === null) {\n      stats.tfirst = new Date();\n    }\n    stats.loaded = event.loaded;\n    if (this.onProgress) {\n      this.onProgress(event, stats);\n    }\n  }\n}\n\nexport default XhrLoader;\n"
  ]
}